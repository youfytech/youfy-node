function a40_0x53d3(){const _0x2c3723=['**/*.html','opts','copySourceFiles','yarn\x20dist','7780347eUTpGT','pkg','yarn\x20install','rm\x20-Rf\x20','dist','./src/index.js','package.json','isArray','scripts','error','1331208eYWEKo','holder_dir','assets','/shared/','../','base_dir','info','1971296QaXvbr','1853936LyreeZ','bot_dir','Install\x20bot\x20dependecies...','/apps','35MnMkNh','Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.','removeTempFiles','apps/*','installDepedencies','workspace_dir','pkg_dir','cwd','./index.js','bots','changePkgForDist','getPackage','dist_dir','**/*.js','Alan\x20Bacelar\x20<alan@youfy.com.br>','removeBaseDistDir','95147GWBYRY','name','copySharedFiles','7976ZhbhLA','pkg_extras','/dist','./src/assets/**','Coping\x20shared\x20files...','main','holder_name','apps','rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20','exports','_copyDir','41211pdOapy','mkdir\x20-p\x20','createWorkspacePkgJson','pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public','8VgdqEm','output_dir','stringify','inherit','bin','/apps/','/common/'];a40_0x53d3=function(){return _0x2c3723;};return a40_0x53d3();}const a40_0x4e1d71=a40_0x43c0;(function(_0x490b3c,_0x3a3a14){const _0x14f4d8=a40_0x43c0,_0x5236f1=_0x490b3c();while(!![]){try{const _0x1bcfa3=parseInt(_0x14f4d8(0x138))/0x1*(-parseInt(_0x14f4d8(0x14a))/0x2)+-parseInt(_0x14f4d8(0x146))/0x3+-parseInt(_0x14f4d8(0x13b))/0x4*(parseInt(_0x14f4d8(0x128))/0x5)+-parseInt(_0x14f4d8(0x15f))/0x6+-parseInt(_0x14f4d8(0x124))/0x7+parseInt(_0x14f4d8(0x123))/0x8+parseInt(_0x14f4d8(0x155))/0x9;if(_0x1bcfa3===_0x3a3a14)break;else _0x5236f1['push'](_0x5236f1['shift']());}catch(_0x303672){_0x5236f1['push'](_0x5236f1['shift']());}}}(a40_0x53d3,0x34b58));const log=require('./logger'),findWorkspaceRoot=require('find-yarn-workspace-root'),{execSync}=require('child_process'),{resolve,basename}=require('path'),{writeFileSync,existsSync}=require('fs');class BotDistributor{constructor(_0x255911){const _0x205e44=a40_0x43c0;this[_0x205e44(0x152)]={'base_dir':process[_0x205e44(0x12f)](),'output_dir':'/tmp/yfy_bot_workspace_dist',..._0x255911},this[_0x205e44(0x12e)]=resolve(this[_0x205e44(0x152)][_0x205e44(0x121)],'package.json'),this[_0x205e44(0x156)]=this[_0x205e44(0x133)](),this[_0x205e44(0x12d)]=findWorkspaceRoot(this[_0x205e44(0x152)][_0x205e44(0x121)])||this[_0x205e44(0x152)][_0x205e44(0x121)],this['holder_dir']=resolve(this[_0x205e44(0x152)][_0x205e44(0x121)],_0x205e44(0x120)),this[_0x205e44(0x141)]=basename(this[_0x205e44(0x11d)]),this['bot_dir']=resolve(this[_0x205e44(0x152)]['output_dir'],basename(this[_0x205e44(0x156)][_0x205e44(0x139)])),this[_0x205e44(0x134)]=resolve(this[_0x205e44(0x125)],'dist');}[a40_0x4e1d71(0x133)](){const _0x1f395b=a40_0x4e1d71;try{return require(this.pkg_dir);}catch(_0xc8d47){return console[_0x1f395b(0x15e)](_0x1f395b(0x129)),{};}}['_copyDir'](_0x25bc58,_0x2067c6,{cwd:_0x434912}={}){const _0x4c75bc=a40_0x4e1d71;execSync(_0x4c75bc(0x143)+_0x25bc58+'\x20'+_0x2067c6,{'stdio':'inherit','cwd':_0x434912});}['_copyDirIfExists'](_0x48bc8b,_0x395928,_0x48ad05){const _0x45eeb3=a40_0x4e1d71;existsSync(_0x48bc8b)&&this[_0x45eeb3(0x145)](_0x48bc8b,_0x395928,_0x48ad05);}[a40_0x4e1d71(0x12a)](){const _0x2cb0e8=a40_0x4e1d71,{output_dir:_0x53dd42}=this[_0x2cb0e8(0x152)];execSync(_0x2cb0e8(0x158)+_0x53dd42),execSync(_0x2cb0e8(0x158)+this['dist_dir']);}[a40_0x4e1d71(0x153)](){const _0x477c47=a40_0x4e1d71;log[_0x477c47(0x122)]('Coping\x20bot\x20files...'),execSync('mkdir\x20-p\x20'+this[_0x477c47(0x125)]);const {base_dir:_0x1031fc}=this[_0x477c47(0x152)];this[_0x477c47(0x145)]('*',this[_0x477c47(0x125)],{'cwd':_0x1031fc});}[a40_0x4e1d71(0x13a)](){const _0x5e8002=a40_0x4e1d71;log[_0x5e8002(0x122)](_0x5e8002(0x13f));const _0xbadd5a=this['opts'][_0x5e8002(0x14b)];execSync(_0x5e8002(0x147)+_0xbadd5a+'/'+this[_0x5e8002(0x141)]),execSync(_0x5e8002(0x147)+_0xbadd5a+_0x5e8002(0x127)),this['_copyDirIfExists'](this[_0x5e8002(0x12d)]+_0x5e8002(0x11f),_0xbadd5a+'/shared/'),this['_copyDirIfExists'](this[_0x5e8002(0x11d)]+_0x5e8002(0x150),_0xbadd5a+'/'+this[_0x5e8002(0x141)]+_0x5e8002(0x150)),this['_copyDirIfExists'](this['holder_dir']+_0x5e8002(0x14f),_0xbadd5a+'/'+this[_0x5e8002(0x141)]+_0x5e8002(0x127));const _0xec4ce7=this[_0x5e8002(0x156)][_0x5e8002(0x142)]||[];for(const _0x134320 of _0xec4ce7){this[_0x5e8002(0x145)](this[_0x5e8002(0x12d)]+_0x5e8002(0x14f)+_0x134320+'/',_0xbadd5a+'/apps/'+_0x134320+'/');}}[a40_0x4e1d71(0x12c)](){const _0xcdf855=a40_0x4e1d71;log[_0xcdf855(0x122)](_0xcdf855(0x126));const {output_dir:_0x528e2f}=this[_0xcdf855(0x152)];execSync(_0xcdf855(0x157),{'stdio':_0xcdf855(0x14d),'cwd':_0x528e2f});}[a40_0x4e1d71(0x132)](){const _0x329c47=a40_0x4e1d71,_0xa829e1=this[_0x329c47(0x156)];_0xa829e1[_0x329c47(0x14e)]=_0xa829e1[_0x329c47(0x14e)]||_0x329c47(0x130),_0xa829e1[_0x329c47(0x140)]=_0xa829e1[_0x329c47(0x140)]||_0x329c47(0x15a);const _0x276c33=_0xa829e1[_0x329c47(0x13c)]||{},_0x5f1a4d=Array[_0x329c47(0x15c)](_0x276c33[_0x329c47(0x11e)])?_0x276c33['assets']:_0x276c33['assets']?[_0x276c33[_0x329c47(0x11e)]]:[];_0xa829e1[_0x329c47(0x156)]={'scripts':[_0x329c47(0x135),..._0x276c33[_0x329c47(0x15d)]||[]],'assets':[_0x329c47(0x13e),_0x329c47(0x151),..._0x5f1a4d],'outputPath':'dist'},_0xa829e1['scripts']={..._0xa829e1[_0x329c47(0x15d)],'dist':_0x329c47(0x149)},writeFileSync(resolve(this[_0x329c47(0x125)],_0x329c47(0x15b)),JSON[_0x329c47(0x14c)](_0xa829e1));}[a40_0x4e1d71(0x159)](){const _0x409924=a40_0x4e1d71;this[_0x409924(0x12a)](),this[_0x409924(0x153)](),this[_0x409924(0x13a)](),this[_0x409924(0x148)](),this[_0x409924(0x132)](),this[_0x409924(0x12c)](),execSync(_0x409924(0x154),{'stdio':'inherit','cwd':this[_0x409924(0x125)]});}['moveToBaseDir'](){const _0x16387d=a40_0x4e1d71;execSync('mv\x20'+this['dist_dir']+'\x20'+this['opts'][_0x16387d(0x121)]+_0x16387d(0x13d));}[a40_0x4e1d71(0x137)](){const _0x4de58d=a40_0x4e1d71;execSync(_0x4de58d(0x158)+this['opts']['base_dir']+'/dist');}[a40_0x4e1d71(0x148)](){const _0x125b13=a40_0x4e1d71,_0x27ce09={'name':_0x125b13(0x131),'private':!![],'workspaces':{'packages':[basename(this[_0x125b13(0x125)]),'shared',_0x125b13(0x12b),this['holder_name']+'/*']},'author':_0x125b13(0x136),'license':'ISC'};writeFileSync(resolve(this[_0x125b13(0x152)][_0x125b13(0x14b)],_0x125b13(0x15b)),JSON[_0x125b13(0x14c)](_0x27ce09));}}function a40_0x43c0(_0x4cd366,_0x238c7a){const _0x53d379=a40_0x53d3();return a40_0x43c0=function(_0x43c06f,_0x340851){_0x43c06f=_0x43c06f-0x11d;let _0xe24829=_0x53d379[_0x43c06f];return _0xe24829;},a40_0x43c0(_0x4cd366,_0x238c7a);}module[a40_0x4e1d71(0x144)]=BotDistributor;