const a40_0x154d8c=a40_0x2723;function a40_0x2723(_0x53e3ee,_0x38ccc0){const _0x1578f3=a40_0x1578();return a40_0x2723=function(_0x272318,_0x337463){_0x272318=_0x272318-0x169;let _0xa63c40=_0x1578f3[_0x272318];return _0xa63c40;},a40_0x2723(_0x53e3ee,_0x38ccc0);}(function(_0x315b64,_0x2dc060){const _0x37fa7e=a40_0x2723,_0xc54dc7=_0x315b64();while(!![]){try{const _0x4a98d4=-parseInt(_0x37fa7e(0x178))/0x1+parseInt(_0x37fa7e(0x19d))/0x2*(-parseInt(_0x37fa7e(0x18a))/0x3)+parseInt(_0x37fa7e(0x17d))/0x4*(parseInt(_0x37fa7e(0x1a6))/0x5)+-parseInt(_0x37fa7e(0x184))/0x6*(-parseInt(_0x37fa7e(0x170))/0x7)+-parseInt(_0x37fa7e(0x182))/0x8+parseInt(_0x37fa7e(0x1ab))/0x9+parseInt(_0x37fa7e(0x1aa))/0xa;if(_0x4a98d4===_0x2dc060)break;else _0xc54dc7['push'](_0xc54dc7['shift']());}catch(_0xbfb71b){_0xc54dc7['push'](_0xc54dc7['shift']());}}}(a40_0x1578,0x466a5));const log=require('./logger'),findWorkspaceRoot=require('find-yarn-workspace-root'),{execSync}=require('child_process'),{resolve,basename}=require('path'),{writeFileSync,existsSync}=require('fs');class BotDistributor{constructor(_0x15296b){const _0x95a963=a40_0x2723;this[_0x95a963(0x19e)]={'base_dir':process[_0x95a963(0x1ad)](),'output_dir':_0x95a963(0x18f),..._0x15296b},this['pkg_dir']=resolve(this['opts'][_0x95a963(0x190)],_0x95a963(0x19a)),this[_0x95a963(0x186)]=this[_0x95a963(0x175)](),this[_0x95a963(0x173)]=findWorkspaceRoot(this[_0x95a963(0x19e)][_0x95a963(0x190)])||this['opts'][_0x95a963(0x190)],this[_0x95a963(0x17c)]=resolve(this[_0x95a963(0x19e)][_0x95a963(0x190)],_0x95a963(0x171)),this[_0x95a963(0x18d)]=basename(this[_0x95a963(0x17c)]),this[_0x95a963(0x180)]=resolve(this['opts'][_0x95a963(0x1a0)],basename(this['pkg'][_0x95a963(0x17b)])),this[_0x95a963(0x191)]=resolve(this['bot_dir'],'dist');}[a40_0x154d8c(0x175)](){const _0xbc20af=a40_0x154d8c;try{return require(this.pkg_dir);}catch(_0x17c932){return console[_0xbc20af(0x172)](_0xbc20af(0x1a4)),{};}}[a40_0x154d8c(0x1a2)](_0x3e528f,_0xb4776c,{cwd:_0x1219a5}={}){const _0x4336cf=a40_0x154d8c;execSync(_0x4336cf(0x1a9)+_0x3e528f+'\x20'+_0xb4776c,{'stdio':'inherit','cwd':_0x1219a5});}['_copyDirIfExists'](_0x3bb417,_0x3eb4ad,_0x4eb0c8){const _0x4ce3a7=a40_0x154d8c;existsSync(_0x3bb417)&&this[_0x4ce3a7(0x1a2)](_0x3bb417,_0x3eb4ad,_0x4eb0c8);}[a40_0x154d8c(0x193)](){const _0x180536=a40_0x154d8c,{output_dir:_0x50115c}=this[_0x180536(0x19e)];execSync(_0x180536(0x16b)+_0x50115c),execSync(_0x180536(0x16b)+this['dist_dir']);}[a40_0x154d8c(0x194)](){const _0x34d634=a40_0x154d8c;log['info'](_0x34d634(0x19f)),execSync(_0x34d634(0x198)+this['bot_dir']);const {base_dir:_0x525c9e}=this[_0x34d634(0x19e)];this['_copyDir']('*',this[_0x34d634(0x180)],{'cwd':_0x525c9e});}[a40_0x154d8c(0x199)](){const _0x1fffce=a40_0x154d8c;log['info'](_0x1fffce(0x192));const _0x43cc75=this['opts'][_0x1fffce(0x1a0)];execSync(_0x1fffce(0x198)+_0x43cc75+'/'+this[_0x1fffce(0x18d)]),execSync('mkdir\x20-p\x20'+_0x43cc75+_0x1fffce(0x16e)),this[_0x1fffce(0x19c)](this['workspace_dir']+_0x1fffce(0x169),_0x43cc75+_0x1fffce(0x169)),this[_0x1fffce(0x19c)](this[_0x1fffce(0x17c)]+_0x1fffce(0x195),_0x43cc75+'/'+this[_0x1fffce(0x18d)]+_0x1fffce(0x195)),this[_0x1fffce(0x19c)](this[_0x1fffce(0x17c)]+_0x1fffce(0x176),_0x43cc75+'/'+this['holder_name']+_0x1fffce(0x16e));const _0x2aaa37=this[_0x1fffce(0x186)][_0x1fffce(0x19b)]||[];for(const _0x4cc98a of _0x2aaa37){this[_0x1fffce(0x1a2)](this[_0x1fffce(0x173)]+_0x1fffce(0x176)+_0x4cc98a+'/',_0x43cc75+_0x1fffce(0x176)+_0x4cc98a+'/');}}[a40_0x154d8c(0x1a3)](){const _0x538ad2=a40_0x154d8c;log[_0x538ad2(0x181)](_0x538ad2(0x1a7));const {output_dir:_0x1486d5}=this[_0x538ad2(0x19e)];execSync(_0x538ad2(0x1ac),{'stdio':_0x538ad2(0x197),'cwd':_0x1486d5});}[a40_0x154d8c(0x1a8)](){const _0x47992c=a40_0x154d8c,_0x3a9e30=this[_0x47992c(0x186)];_0x3a9e30[_0x47992c(0x18c)]=_0x3a9e30[_0x47992c(0x18c)]||_0x47992c(0x18e),_0x3a9e30[_0x47992c(0x1a5)]=_0x3a9e30[_0x47992c(0x1a5)]||_0x47992c(0x16c);const _0x494786=_0x3a9e30[_0x47992c(0x196)]||{},_0x126a51=Array[_0x47992c(0x189)](_0x494786[_0x47992c(0x17f)])?_0x494786[_0x47992c(0x17f)]:_0x494786[_0x47992c(0x17f)]?[_0x494786[_0x47992c(0x17f)]]:[];_0x3a9e30[_0x47992c(0x186)]={'scripts':['**/*.js',..._0x494786[_0x47992c(0x17a)]||[]],'assets':[_0x47992c(0x177),_0x47992c(0x179),..._0x126a51],'outputPath':_0x47992c(0x188)},_0x3a9e30['scripts']={..._0x3a9e30[_0x47992c(0x17a)],'dist':_0x47992c(0x17e)},writeFileSync(resolve(this[_0x47992c(0x180)],_0x47992c(0x19a)),JSON[_0x47992c(0x185)](_0x3a9e30));}[a40_0x154d8c(0x188)](){const _0x59e369=a40_0x154d8c;this[_0x59e369(0x193)](),this[_0x59e369(0x194)](),this['copySharedFiles'](),this[_0x59e369(0x187)](),this[_0x59e369(0x1a8)](),this[_0x59e369(0x1a3)](),execSync(_0x59e369(0x1a1),{'stdio':_0x59e369(0x197),'cwd':this['bot_dir']});}[a40_0x154d8c(0x16a)](){const _0x20c9ad=a40_0x154d8c;execSync('mv\x20'+this['dist_dir']+'\x20'+this[_0x20c9ad(0x19e)][_0x20c9ad(0x190)]+_0x20c9ad(0x16d));}[a40_0x154d8c(0x174)](){const _0x3df92b=a40_0x154d8c;execSync(_0x3df92b(0x16b)+this[_0x3df92b(0x19e)]['base_dir']+_0x3df92b(0x16d));}[a40_0x154d8c(0x187)](){const _0x4789c9=a40_0x154d8c,_0x4cc80b={'name':_0x4789c9(0x18b),'private':!![],'workspaces':{'packages':[basename(this[_0x4789c9(0x180)]),_0x4789c9(0x16f),'apps/*',this[_0x4789c9(0x18d)]+'/*']},'author':_0x4789c9(0x183),'license':'ISC'};writeFileSync(resolve(this[_0x4789c9(0x19e)][_0x4789c9(0x1a0)],_0x4789c9(0x19a)),JSON['stringify'](_0x4cc80b));}}function a40_0x1578(){const _0x1e93dd=['5VLaUZf','Install\x20bot\x20dependecies...','changePkgForDist','rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20','6508230EqWVZZ','1934982rVMsTV','yarn\x20install','cwd','/shared/','moveToBaseDir','rm\x20-Rf\x20','./src/index.js','/dist','/apps','shared','7UNpetz','../','error','workspace_dir','removeBaseDistDir','getPackage','/apps/','./src/assets/**','474797XGOCXD','**/*.html','scripts','name','holder_dir','45176mvlkAQ','pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public','assets','bot_dir','info','2182712ASJzgA','Alan\x20Bacelar\x20<alan@youfy.com.br>','1460454aOaytT','stringify','pkg','createWorkspacePkgJson','dist','isArray','253401XVpYIj','bots','bin','holder_name','./index.js','/tmp/yfy_bot_workspace_dist','base_dir','dist_dir','Coping\x20shared\x20files...','removeTempFiles','copySourceFiles','/common/','pkg_extras','inherit','mkdir\x20-p\x20','copySharedFiles','package.json','apps','_copyDirIfExists','2lGXKAG','opts','Coping\x20bot\x20files...','output_dir','yarn\x20dist','_copyDir','installDepedencies','Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.','main'];a40_0x1578=function(){return _0x1e93dd;};return a40_0x1578();}module['exports']=BotDistributor;