const a40_0x5f4e5e=a40_0x56c5;(function(_0x306fb3,_0x136348){const _0x3ce8ae=a40_0x56c5,_0x35faea=_0x306fb3();while(!![]){try{const _0xdce062=-parseInt(_0x3ce8ae(0x214))/0x1+-parseInt(_0x3ce8ae(0x204))/0x2+-parseInt(_0x3ce8ae(0x1fe))/0x3+parseInt(_0x3ce8ae(0x1f9))/0x4*(parseInt(_0x3ce8ae(0x1e5))/0x5)+-parseInt(_0x3ce8ae(0x208))/0x6*(-parseInt(_0x3ce8ae(0x213))/0x7)+parseInt(_0x3ce8ae(0x1f8))/0x8+parseInt(_0x3ce8ae(0x205))/0x9;if(_0xdce062===_0x136348)break;else _0x35faea['push'](_0x35faea['shift']());}catch(_0x3675b9){_0x35faea['push'](_0x35faea['shift']());}}}(a40_0x4d63,0x51bc6));const log=require('./logger'),findWorkspaceRoot=require('find-yarn-workspace-root'),{execSync}=require('child_process'),{resolve,basename}=require('path'),{writeFileSync,existsSync}=require('fs');function a40_0x56c5(_0x2cfbde,_0x4dc3e4){const _0x4d63bc=a40_0x4d63();return a40_0x56c5=function(_0x56c52c,_0x28226e){_0x56c52c=_0x56c52c-0x1d6;let _0x4b5a87=_0x4d63bc[_0x56c52c];return _0x4b5a87;},a40_0x56c5(_0x2cfbde,_0x4dc3e4);}function a40_0x4d63(){const _0x24f83c=['holder_dir','../','6voIhiX','main','output_dir','getPackage','yarn\x20dist','Coping\x20bot\x20files...','/shared/','dist_dir','stringify','copySourceFiles','pkg','1820434CDpyuQ','465221nzHvVl','apps','holder_name','base_dir','**/*.html','package.json','mkdir\x20-p\x20','inherit','/apps/','./src/index.js','/dist','Coping\x20shared\x20files...','./index.js','removeTempFiles','isArray','/common/','30230CNHOtO','_copyDirIfExists','rm\x20-Rf\x20','createWorkspacePkgJson','Alan\x20Bacelar\x20<alan@youfy.com.br>','workspace_dir','scripts','installDepedencies','changePkgForDist','name','removeBaseDistDir','_copyDir','Install\x20bot\x20dependecies...','/apps','/tmp/yfy_bot_workspace_dist','bot_dir','pkg_extras','yarn\x20install','bin','2436728CaCUEs','280DRyQze','assets','rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20','bots','info','913569PocNWy','copySharedFiles','cwd','mv\x20','dist','opts','1164226dpfltz','6288966DvjnrK'];a40_0x4d63=function(){return _0x24f83c;};return a40_0x4d63();}class BotDistributor{constructor(_0x1f3ac5){const _0xa457b5=a40_0x56c5;this[_0xa457b5(0x203)]={'base_dir':process[_0xa457b5(0x200)](),'output_dir':_0xa457b5(0x1f3),..._0x1f3ac5},this['pkg_dir']=resolve(this[_0xa457b5(0x203)][_0xa457b5(0x1d8)],_0xa457b5(0x1da)),this['pkg']=this[_0xa457b5(0x20b)](),this[_0xa457b5(0x1ea)]=findWorkspaceRoot(this[_0xa457b5(0x203)]['base_dir'])||this[_0xa457b5(0x203)][_0xa457b5(0x1d8)],this['holder_dir']=resolve(this[_0xa457b5(0x203)][_0xa457b5(0x1d8)],_0xa457b5(0x207)),this['holder_name']=basename(this[_0xa457b5(0x206)]),this[_0xa457b5(0x1f4)]=resolve(this[_0xa457b5(0x203)]['output_dir'],basename(this[_0xa457b5(0x212)][_0xa457b5(0x1ee)])),this[_0xa457b5(0x20f)]=resolve(this['bot_dir'],_0xa457b5(0x202));}['getPackage'](){try{return require(this.pkg_dir);}catch(_0x339db6){return console['error']('Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.'),{};}}[a40_0x5f4e5e(0x1f0)](_0x53185d,_0x29dc37,{cwd:_0xc2550c}={}){const _0x6dcf60=a40_0x5f4e5e;execSync(_0x6dcf60(0x1fb)+_0x53185d+'\x20'+_0x29dc37,{'stdio':_0x6dcf60(0x1dc),'cwd':_0xc2550c});}['_copyDirIfExists'](_0x1b2ec8,_0x45fd7a,_0x23379c){const _0x4dd342=a40_0x5f4e5e;existsSync(_0x1b2ec8)&&this[_0x4dd342(0x1f0)](_0x1b2ec8,_0x45fd7a,_0x23379c);}[a40_0x5f4e5e(0x1e2)](){const _0x485ea0=a40_0x5f4e5e,{output_dir:_0x4d59f4}=this[_0x485ea0(0x203)];execSync('rm\x20-Rf\x20'+_0x4d59f4),execSync('rm\x20-Rf\x20'+this['dist_dir']);}[a40_0x5f4e5e(0x211)](){const _0x2a5301=a40_0x5f4e5e;log[_0x2a5301(0x1fd)](_0x2a5301(0x20d)),execSync(_0x2a5301(0x1db)+this[_0x2a5301(0x1f4)]);const {base_dir:_0x1f0848}=this['opts'];this[_0x2a5301(0x1f0)]('*',this[_0x2a5301(0x1f4)],{'cwd':_0x1f0848});}[a40_0x5f4e5e(0x1ff)](){const _0x27ec80=a40_0x5f4e5e;log[_0x27ec80(0x1fd)](_0x27ec80(0x1e0));const _0x234598=this[_0x27ec80(0x203)][_0x27ec80(0x20a)];execSync(_0x27ec80(0x1db)+_0x234598+'/'+this[_0x27ec80(0x1d7)]),execSync(_0x27ec80(0x1db)+_0x234598+_0x27ec80(0x1f2)),this[_0x27ec80(0x1e6)](this[_0x27ec80(0x1ea)]+_0x27ec80(0x20e),_0x234598+_0x27ec80(0x20e)),this[_0x27ec80(0x1e6)](this[_0x27ec80(0x206)]+_0x27ec80(0x1e4),_0x234598+'/'+this[_0x27ec80(0x1d7)]+_0x27ec80(0x1e4)),this['_copyDirIfExists'](this[_0x27ec80(0x206)]+_0x27ec80(0x1dd),_0x234598+'/'+this['holder_name']+'/apps');const _0x3832b6=this[_0x27ec80(0x212)][_0x27ec80(0x1d6)]||[];for(const _0x377b04 of _0x3832b6){this[_0x27ec80(0x1f0)](this[_0x27ec80(0x1ea)]+_0x27ec80(0x1dd)+_0x377b04+'/',_0x234598+_0x27ec80(0x1dd)+_0x377b04+'/');}}[a40_0x5f4e5e(0x1ec)](){const _0x163d67=a40_0x5f4e5e;log['info'](_0x163d67(0x1f1));const {output_dir:_0x651da}=this[_0x163d67(0x203)];execSync(_0x163d67(0x1f6),{'stdio':_0x163d67(0x1dc),'cwd':_0x651da});}['changePkgForDist'](){const _0x286054=a40_0x5f4e5e,_0x1eb407=this[_0x286054(0x212)];_0x1eb407[_0x286054(0x1f7)]=_0x1eb407[_0x286054(0x1f7)]||_0x286054(0x1e1),_0x1eb407[_0x286054(0x209)]=_0x1eb407[_0x286054(0x209)]||_0x286054(0x1de);const _0x4936f8=_0x1eb407[_0x286054(0x1f5)]||{},_0x9a2675=Array[_0x286054(0x1e3)](_0x4936f8[_0x286054(0x1fa)])?_0x4936f8[_0x286054(0x1fa)]:_0x4936f8[_0x286054(0x1fa)]?[_0x4936f8[_0x286054(0x1fa)]]:[];_0x1eb407[_0x286054(0x212)]={'scripts':['**/*.js',..._0x4936f8['scripts']||[]],'assets':['./src/assets/**',_0x286054(0x1d9),..._0x9a2675],'outputPath':_0x286054(0x202)},_0x1eb407[_0x286054(0x1eb)]={..._0x1eb407[_0x286054(0x1eb)],'dist':'pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public'},writeFileSync(resolve(this[_0x286054(0x1f4)],_0x286054(0x1da)),JSON[_0x286054(0x210)](_0x1eb407));}[a40_0x5f4e5e(0x202)](){const _0xa5b30d=a40_0x5f4e5e;this[_0xa5b30d(0x1e2)](),this[_0xa5b30d(0x211)](),this[_0xa5b30d(0x1ff)](),this['createWorkspacePkgJson'](),this[_0xa5b30d(0x1ed)](),this['installDepedencies'](),execSync(_0xa5b30d(0x20c),{'stdio':'inherit','cwd':this[_0xa5b30d(0x1f4)]});}['moveToBaseDir'](){const _0x543971=a40_0x5f4e5e;execSync(_0x543971(0x201)+this[_0x543971(0x20f)]+'\x20'+this[_0x543971(0x203)]['base_dir']+_0x543971(0x1df));}[a40_0x5f4e5e(0x1ef)](){const _0x3580c2=a40_0x5f4e5e;execSync(_0x3580c2(0x1e7)+this[_0x3580c2(0x203)][_0x3580c2(0x1d8)]+_0x3580c2(0x1df));}[a40_0x5f4e5e(0x1e8)](){const _0x3f2f7b=a40_0x5f4e5e,_0x5bd1f5={'name':_0x3f2f7b(0x1fc),'private':!![],'workspaces':{'packages':[basename(this['bot_dir']),'shared','apps/*',this[_0x3f2f7b(0x1d7)]+'/*']},'author':_0x3f2f7b(0x1e9),'license':'ISC'};writeFileSync(resolve(this[_0x3f2f7b(0x203)][_0x3f2f7b(0x20a)],_0x3f2f7b(0x1da)),JSON['stringify'](_0x5bd1f5));}}module['exports']=BotDistributor;