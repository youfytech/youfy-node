function a40_0x40c0(_0x3c537d,_0x3b210b){const _0x43adca=a40_0x43ad();return a40_0x40c0=function(_0x40c0a5,_0x92ef18){_0x40c0a5=_0x40c0a5-0x1d2;let _0x527deb=_0x43adca[_0x40c0a5];return _0x527deb;},a40_0x40c0(_0x3c537d,_0x3b210b);}const a40_0x1bbf32=a40_0x40c0;(function(_0x48c8ba,_0xde1ac6){const _0x568a7f=a40_0x40c0,_0x5ce2d8=_0x48c8ba();while(!![]){try{const _0x6f191d=parseInt(_0x568a7f(0x1d6))/0x1+parseInt(_0x568a7f(0x1f6))/0x2+parseInt(_0x568a7f(0x203))/0x3+-parseInt(_0x568a7f(0x205))/0x4+-parseInt(_0x568a7f(0x1ef))/0x5+-parseInt(_0x568a7f(0x1d5))/0x6*(parseInt(_0x568a7f(0x208))/0x7)+-parseInt(_0x568a7f(0x1db))/0x8;if(_0x6f191d===_0xde1ac6)break;else _0x5ce2d8['push'](_0x5ce2d8['shift']());}catch(_0x52e7bd){_0x5ce2d8['push'](_0x5ce2d8['shift']());}}}(a40_0x43ad,0x3562f));function a40_0x43ad(){const _0x30c987=['ISC','installDepedencies','rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20','**/*.js','opts','_copyDir','384124kaJHvU','pkg_extras','mv\x20','changePkgForDist','**/*.html','assets','./src/index.js','_copyDirIfExists','rm\x20-Rf\x20','Coping\x20shared\x20files...','getPackage','error','dist_dir','949260ViyUUQ','name','206992kVOXrt','/tmp/yfy_bot_workspace_dist','output_dir','7wDoGGn','holder_name','holder_dir','../','cwd','removeBaseDistDir','exports','inherit','Install\x20bot\x20dependecies...','main','mkdir\x20-p\x20','41466EaQSwn','241239dKgEUE','isArray','yarn\x20install','copySharedFiles','/apps/','1491592ApzRel','moveToBaseDir','dist','base_dir','workspace_dir','bin','copySourceFiles','/common/','/apps','scripts','./src/assets/**','package.json','/shared/','bot_dir','info','./index.js','pkg','shared','yarn\x20dist','createWorkspacePkgJson','1429710VTsstK'];a40_0x43ad=function(){return _0x30c987;};return a40_0x43ad();}const log=require('./logger'),findWorkspaceRoot=require('find-yarn-workspace-root'),{execSync}=require('child_process'),{resolve,basename}=require('path'),{writeFileSync,existsSync}=require('fs');class BotDistributor{constructor(_0x431354){const _0x822b84=a40_0x40c0;this[_0x822b84(0x1f4)]={'base_dir':process[_0x822b84(0x20c)](),'output_dir':_0x822b84(0x206),..._0x431354},this['pkg_dir']=resolve(this['opts']['base_dir'],_0x822b84(0x1e6)),this[_0x822b84(0x1eb)]=this['getPackage'](),this[_0x822b84(0x1df)]=findWorkspaceRoot(this[_0x822b84(0x1f4)][_0x822b84(0x1de)])||this[_0x822b84(0x1f4)][_0x822b84(0x1de)],this[_0x822b84(0x20a)]=resolve(this[_0x822b84(0x1f4)]['base_dir'],_0x822b84(0x20b)),this['holder_name']=basename(this['holder_dir']),this[_0x822b84(0x1e8)]=resolve(this[_0x822b84(0x1f4)][_0x822b84(0x207)],basename(this['pkg'][_0x822b84(0x204)])),this[_0x822b84(0x202)]=resolve(this[_0x822b84(0x1e8)],_0x822b84(0x1dd));}[a40_0x1bbf32(0x200)](){const _0x4f496d=a40_0x1bbf32;try{return require(this.pkg_dir);}catch(_0x3353be){return console[_0x4f496d(0x201)]('Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.'),{};}}[a40_0x1bbf32(0x1f5)](_0x20b1fd,_0x9f2266,{cwd:_0x46b441}={}){const _0x2a987c=a40_0x1bbf32;execSync(_0x2a987c(0x1f2)+_0x20b1fd+'\x20'+_0x9f2266,{'stdio':_0x2a987c(0x20f),'cwd':_0x46b441});}[a40_0x1bbf32(0x1fd)](_0x467e86,_0x46c144,_0x4d3d84){const _0x1a49b4=a40_0x1bbf32;existsSync(_0x467e86)&&this[_0x1a49b4(0x1f5)](_0x467e86,_0x46c144,_0x4d3d84);}['removeTempFiles'](){const _0x2af1b8=a40_0x1bbf32,{output_dir:_0x343980}=this[_0x2af1b8(0x1f4)];execSync(_0x2af1b8(0x1fe)+_0x343980),execSync('rm\x20-Rf\x20'+this[_0x2af1b8(0x202)]);}[a40_0x1bbf32(0x1e1)](){const _0x39d5ce=a40_0x1bbf32;log[_0x39d5ce(0x1e9)]('Coping\x20bot\x20files...'),execSync(_0x39d5ce(0x1d4)+this[_0x39d5ce(0x1e8)]);const {base_dir:_0x4e86ec}=this[_0x39d5ce(0x1f4)];this['_copyDir']('*',this['bot_dir'],{'cwd':_0x4e86ec});}[a40_0x1bbf32(0x1d9)](){const _0x55ad50=a40_0x1bbf32;log['info'](_0x55ad50(0x1ff));const _0xbc0ea4=this[_0x55ad50(0x1f4)][_0x55ad50(0x207)];execSync(_0x55ad50(0x1d4)+_0xbc0ea4+'/'+this[_0x55ad50(0x209)]),execSync(_0x55ad50(0x1d4)+_0xbc0ea4+_0x55ad50(0x1e3)),this[_0x55ad50(0x1fd)](this['workspace_dir']+_0x55ad50(0x1e7),_0xbc0ea4+_0x55ad50(0x1e7)),this[_0x55ad50(0x1fd)](this[_0x55ad50(0x20a)]+_0x55ad50(0x1e2),_0xbc0ea4+'/'+this[_0x55ad50(0x209)]+_0x55ad50(0x1e2)),this[_0x55ad50(0x1fd)](this['holder_dir']+_0x55ad50(0x1da),_0xbc0ea4+'/'+this[_0x55ad50(0x209)]+_0x55ad50(0x1e3));const _0x436435=this['pkg']['apps']||[];for(const _0x5a7e5c of _0x436435){this[_0x55ad50(0x1f5)](this[_0x55ad50(0x1df)]+_0x55ad50(0x1da)+_0x5a7e5c+'/',_0xbc0ea4+_0x55ad50(0x1da)+_0x5a7e5c+'/');}}[a40_0x1bbf32(0x1f1)](){const _0x58d19d=a40_0x1bbf32;log[_0x58d19d(0x1e9)](_0x58d19d(0x1d2));const {output_dir:_0x27eabf}=this[_0x58d19d(0x1f4)];execSync(_0x58d19d(0x1d8),{'stdio':'inherit','cwd':_0x27eabf});}[a40_0x1bbf32(0x1f9)](){const _0x3039d3=a40_0x1bbf32,_0x3ff2b7=this[_0x3039d3(0x1eb)];_0x3ff2b7[_0x3039d3(0x1e0)]=_0x3ff2b7[_0x3039d3(0x1e0)]||_0x3039d3(0x1ea),_0x3ff2b7[_0x3039d3(0x1d3)]=_0x3ff2b7[_0x3039d3(0x1d3)]||_0x3039d3(0x1fc);const _0x57752e=_0x3ff2b7[_0x3039d3(0x1f7)]||{},_0x427489=Array[_0x3039d3(0x1d7)](_0x57752e['assets'])?_0x57752e['assets']:_0x57752e[_0x3039d3(0x1fb)]?[_0x57752e[_0x3039d3(0x1fb)]]:[];_0x3ff2b7['pkg']={'scripts':[_0x3039d3(0x1f3),..._0x57752e[_0x3039d3(0x1e4)]||[]],'assets':[_0x3039d3(0x1e5),_0x3039d3(0x1fa),..._0x427489],'outputPath':_0x3039d3(0x1dd)},_0x3ff2b7[_0x3039d3(0x1e4)]={..._0x3ff2b7['scripts'],'dist':'pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public'},writeFileSync(resolve(this[_0x3039d3(0x1e8)],_0x3039d3(0x1e6)),JSON['stringify'](_0x3ff2b7));}['dist'](){const _0x55539f=a40_0x1bbf32;this['removeTempFiles'](),this['copySourceFiles'](),this[_0x55539f(0x1d9)](),this[_0x55539f(0x1ee)](),this[_0x55539f(0x1f9)](),this[_0x55539f(0x1f1)](),execSync(_0x55539f(0x1ed),{'stdio':'inherit','cwd':this[_0x55539f(0x1e8)]});}[a40_0x1bbf32(0x1dc)](){const _0x2bdd4f=a40_0x1bbf32;execSync(_0x2bdd4f(0x1f8)+this['dist_dir']+'\x20'+this[_0x2bdd4f(0x1f4)][_0x2bdd4f(0x1de)]+'/dist');}[a40_0x1bbf32(0x20d)](){const _0x2f74a0=a40_0x1bbf32;execSync(_0x2f74a0(0x1fe)+this[_0x2f74a0(0x1f4)][_0x2f74a0(0x1de)]+'/dist');}[a40_0x1bbf32(0x1ee)](){const _0x41f254=a40_0x1bbf32,_0x282ed2={'name':'bots','private':!![],'workspaces':{'packages':[basename(this[_0x41f254(0x1e8)]),_0x41f254(0x1ec),'apps/*',this[_0x41f254(0x209)]+'/*']},'author':'Alan\x20Bacelar\x20<alan@youfy.com.br>','license':_0x41f254(0x1f0)};writeFileSync(resolve(this['opts']['output_dir'],_0x41f254(0x1e6)),JSON['stringify'](_0x282ed2));}}module[a40_0x1bbf32(0x20e)]=BotDistributor;