const a40_0x430d0f=a40_0x9085;function a40_0xcfaa(){const _0x4c5b56=['Install\x20bot\x20dependecies...','/dist','pkg','/tmp/yfy_bot_workspace_dist','info','mkdir\x20-p\x20','940hQZXjo','inherit','removeTempFiles','opts','bot_dir','2148bqSZWJ','**/*.html','cwd','/apps','1798000lUglvI','Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.','11997gCwJUV','apps','7lGPitu','Coping\x20bot\x20files...','installDepedencies','main','ISC','12cCDecm','stringify','6096ZJLlOg','rm\x20-Rf\x20','3054623NBNtkF','getPackage','Coping\x20shared\x20files...','package.json','isArray','../','rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20','base_dir','shared','holder_dir','apps/*','1701438zFtXwr','removeBaseDistDir','/shared/','286kdQDEI','createWorkspacePkgJson','assets','dist_dir','workspace_dir','./index.js','_copyDirIfExists','/common/','982983kQtbWe','changePkgForDist','output_dir','yarn\x20install','exports','/apps/','scripts','_copyDir','pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public','dist','copySharedFiles','holder_name','name','yarn\x20dist','bots','2015AWFtTh','pkg_dir','./src/index.js','copySourceFiles'];a40_0xcfaa=function(){return _0x4c5b56;};return a40_0xcfaa();}(function(_0x4348f4,_0x5efc7b){const _0x726361=a40_0x9085,_0x48a925=_0x4348f4();while(!![]){try{const _0x1500f2=-parseInt(_0x726361(0xcd))/0x1*(parseInt(_0x726361(0xae))/0x2)+-parseInt(_0x726361(0xd5))/0x3+parseInt(_0x726361(0xbd))/0x4*(parseInt(_0x726361(0xe4))/0x5)+parseInt(_0x726361(0xca))/0x6*(parseInt(_0x726361(0xb6))/0x7)+parseInt(_0x726361(0xb2))/0x8+-parseInt(_0x726361(0xb4))/0x9*(-parseInt(_0x726361(0xa9))/0xa)+-parseInt(_0x726361(0xbf))/0xb*(parseInt(_0x726361(0xbb))/0xc);if(_0x1500f2===_0x5efc7b)break;else _0x48a925['push'](_0x48a925['shift']());}catch(_0x534e15){_0x48a925['push'](_0x48a925['shift']());}}}(a40_0xcfaa,0x51daf));const log=require('./logger'),findWorkspaceRoot=require('find-yarn-workspace-root'),{execSync}=require('child_process'),{resolve,basename}=require('path'),{writeFileSync,existsSync}=require('fs');class BotDistributor{constructor(_0x11a30a){const _0x415fc0=a40_0x9085;this[_0x415fc0(0xac)]={'base_dir':process[_0x415fc0(0xb0)](),'output_dir':_0x415fc0(0xa6),..._0x11a30a},this[_0x415fc0(0xe5)]=resolve(this[_0x415fc0(0xac)][_0x415fc0(0xc6)],_0x415fc0(0xc2)),this[_0x415fc0(0xa5)]=this['getPackage'](),this[_0x415fc0(0xd1)]=findWorkspaceRoot(this[_0x415fc0(0xac)][_0x415fc0(0xc6)])||this[_0x415fc0(0xac)][_0x415fc0(0xc6)],this[_0x415fc0(0xc8)]=resolve(this[_0x415fc0(0xac)][_0x415fc0(0xc6)],_0x415fc0(0xc4)),this['holder_name']=basename(this[_0x415fc0(0xc8)]),this[_0x415fc0(0xad)]=resolve(this[_0x415fc0(0xac)][_0x415fc0(0xd7)],basename(this['pkg'][_0x415fc0(0xe1)])),this[_0x415fc0(0xd0)]=resolve(this[_0x415fc0(0xad)],'dist');}[a40_0x430d0f(0xc0)](){const _0x3a42f4=a40_0x430d0f;try{return require(this.pkg_dir);}catch(_0x35bc93){return console['error'](_0x3a42f4(0xb3)),{};}}[a40_0x430d0f(0xdc)](_0x2eeb0f,_0x467234,{cwd:_0x352077}={}){const _0x224e4c=a40_0x430d0f;execSync(_0x224e4c(0xc5)+_0x2eeb0f+'\x20'+_0x467234,{'stdio':_0x224e4c(0xaa),'cwd':_0x352077});}['_copyDirIfExists'](_0x56b34d,_0x39268f,_0x35918b){const _0x54f77f=a40_0x430d0f;existsSync(_0x56b34d)&&this[_0x54f77f(0xdc)](_0x56b34d,_0x39268f,_0x35918b);}[a40_0x430d0f(0xab)](){const _0x3661a0=a40_0x430d0f,{output_dir:_0x306d02}=this[_0x3661a0(0xac)];execSync(_0x3661a0(0xbe)+_0x306d02),execSync('rm\x20-Rf\x20'+this[_0x3661a0(0xd0)]);}[a40_0x430d0f(0xa2)](){const _0x2f0413=a40_0x430d0f;log[_0x2f0413(0xa7)](_0x2f0413(0xb7)),execSync('mkdir\x20-p\x20'+this[_0x2f0413(0xad)]);const {base_dir:_0x165f16}=this[_0x2f0413(0xac)];this['_copyDir']('*',this[_0x2f0413(0xad)],{'cwd':_0x165f16});}[a40_0x430d0f(0xdf)](){const _0x3bc47a=a40_0x430d0f;log[_0x3bc47a(0xa7)](_0x3bc47a(0xc1));const _0x2d9855=this[_0x3bc47a(0xac)][_0x3bc47a(0xd7)];execSync(_0x3bc47a(0xa8)+_0x2d9855+'/'+this[_0x3bc47a(0xe0)]),execSync(_0x3bc47a(0xa8)+_0x2d9855+_0x3bc47a(0xb1)),this[_0x3bc47a(0xd3)](this[_0x3bc47a(0xd1)]+_0x3bc47a(0xcc),_0x2d9855+_0x3bc47a(0xcc)),this[_0x3bc47a(0xd3)](this[_0x3bc47a(0xc8)]+_0x3bc47a(0xd4),_0x2d9855+'/'+this['holder_name']+_0x3bc47a(0xd4)),this['_copyDirIfExists'](this[_0x3bc47a(0xc8)]+_0x3bc47a(0xda),_0x2d9855+'/'+this[_0x3bc47a(0xe0)]+_0x3bc47a(0xb1));const _0x3660a8=this[_0x3bc47a(0xa5)][_0x3bc47a(0xb5)]||[];for(const _0x306457 of _0x3660a8){this[_0x3bc47a(0xdc)](this['workspace_dir']+_0x3bc47a(0xda)+_0x306457+'/',_0x2d9855+_0x3bc47a(0xda)+_0x306457+'/');}}[a40_0x430d0f(0xb8)](){const _0x51f35f=a40_0x430d0f;log[_0x51f35f(0xa7)](_0x51f35f(0xa3));const {output_dir:_0x17a0c3}=this[_0x51f35f(0xac)];execSync(_0x51f35f(0xd8),{'stdio':_0x51f35f(0xaa),'cwd':_0x17a0c3});}[a40_0x430d0f(0xd6)](){const _0x485563=a40_0x430d0f,_0x1b9b88=this['pkg'];_0x1b9b88['bin']=_0x1b9b88['bin']||_0x485563(0xd2),_0x1b9b88[_0x485563(0xb9)]=_0x1b9b88[_0x485563(0xb9)]||_0x485563(0xa1);const _0xa5ac05=_0x1b9b88['pkg_extras']||{},_0x46b35f=Array[_0x485563(0xc3)](_0xa5ac05[_0x485563(0xcf)])?_0xa5ac05['assets']:_0xa5ac05[_0x485563(0xcf)]?[_0xa5ac05[_0x485563(0xcf)]]:[];_0x1b9b88['pkg']={'scripts':['**/*.js',..._0xa5ac05[_0x485563(0xdb)]||[]],'assets':['./src/assets/**',_0x485563(0xaf),..._0x46b35f],'outputPath':_0x485563(0xde)},_0x1b9b88[_0x485563(0xdb)]={..._0x1b9b88[_0x485563(0xdb)],'dist':_0x485563(0xdd)},writeFileSync(resolve(this['bot_dir'],'package.json'),JSON[_0x485563(0xbc)](_0x1b9b88));}[a40_0x430d0f(0xde)](){const _0x4f8149=a40_0x430d0f;this[_0x4f8149(0xab)](),this[_0x4f8149(0xa2)](),this[_0x4f8149(0xdf)](),this['createWorkspacePkgJson'](),this[_0x4f8149(0xd6)](),this[_0x4f8149(0xb8)](),execSync(_0x4f8149(0xe2),{'stdio':_0x4f8149(0xaa),'cwd':this[_0x4f8149(0xad)]});}['moveToBaseDir'](){const _0x3a709d=a40_0x430d0f;execSync('mv\x20'+this[_0x3a709d(0xd0)]+'\x20'+this[_0x3a709d(0xac)][_0x3a709d(0xc6)]+_0x3a709d(0xa4));}[a40_0x430d0f(0xcb)](){const _0x5dbdd0=a40_0x430d0f;execSync(_0x5dbdd0(0xbe)+this[_0x5dbdd0(0xac)][_0x5dbdd0(0xc6)]+'/dist');}[a40_0x430d0f(0xce)](){const _0x26d6a6=a40_0x430d0f,_0x36b512={'name':_0x26d6a6(0xe3),'private':!![],'workspaces':{'packages':[basename(this[_0x26d6a6(0xad)]),_0x26d6a6(0xc7),_0x26d6a6(0xc9),this[_0x26d6a6(0xe0)]+'/*']},'author':'Alan\x20Bacelar\x20<alan@youfy.com.br>','license':_0x26d6a6(0xba)};writeFileSync(resolve(this[_0x26d6a6(0xac)][_0x26d6a6(0xd7)],'package.json'),JSON[_0x26d6a6(0xbc)](_0x36b512));}}function a40_0x9085(_0x3c2c33,_0x58a14c){const _0xcfaa13=a40_0xcfaa();return a40_0x9085=function(_0x9085e7,_0x41aa56){_0x9085e7=_0x9085e7-0xa1;let _0x1401d5=_0xcfaa13[_0x9085e7];return _0x1401d5;},a40_0x9085(_0x3c2c33,_0x58a14c);}module[a40_0x430d0f(0xd9)]=BotDistributor;