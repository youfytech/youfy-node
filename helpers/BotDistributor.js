function a40_0x324d(_0x1ee7c4,_0x599d73){const _0x13ac70=a40_0x13ac();return a40_0x324d=function(_0x324d34,_0x1e8634){_0x324d34=_0x324d34-0x71;let _0x30e6e3=_0x13ac70[_0x324d34];return _0x30e6e3;},a40_0x324d(_0x1ee7c4,_0x599d73);}const a40_0x2fa316=a40_0x324d;(function(_0x4222cb,_0x5b06ee){const _0x5e645c=a40_0x324d,_0x4c0ec0=_0x4222cb();while(!![]){try{const _0x34b558=-parseInt(_0x5e645c(0x7e))/0x1*(-parseInt(_0x5e645c(0x78))/0x2)+-parseInt(_0x5e645c(0xa3))/0x3*(-parseInt(_0x5e645c(0x93))/0x4)+-parseInt(_0x5e645c(0x7f))/0x5*(parseInt(_0x5e645c(0x79))/0x6)+-parseInt(_0x5e645c(0x77))/0x7*(-parseInt(_0x5e645c(0xa4))/0x8)+-parseInt(_0x5e645c(0x84))/0x9+parseInt(_0x5e645c(0x73))/0xa*(-parseInt(_0x5e645c(0x97))/0xb)+-parseInt(_0x5e645c(0x8e))/0xc;if(_0x34b558===_0x5b06ee)break;else _0x4c0ec0['push'](_0x4c0ec0['shift']());}catch(_0x1e3cad){_0x4c0ec0['push'](_0x4c0ec0['shift']());}}}(a40_0x13ac,0xf3874));function a40_0x13ac(){const _0x417ef9=['assets','workspace_dir','removeBaseDistDir','exports','4yjzLoR','../','dist_dir','ISC','11DNVwBN','./src/index.js','inherit','installDepedencies','rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20','yarn\x20install','base_dir','opts','/dist','stringify','moveToBaseDir','/apps/','3863229ImoSjN','8BryrAg','**/*.js','info','mkdir\x20-p\x20','package.json','bots','bin','scripts','copySourceFiles','pkg_extras','Alan\x20Bacelar\x20<alan@youfy.com.br>','/tmp/yfy_bot_workspace_dist','Install\x20bot\x20dependecies...','holder_dir','getPackage','removeTempFiles','pkg_dir','1485930TiXUOF','bot_dir','_copyDirIfExists','dist','13297879nMUxrG','1232354gxUNYw','24mEdyDw','changePkgForDist','**/*.html','_copyDir','name','1dihGaa','1103150nEdjRV','rm\x20-Rf\x20','output_dir','pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public','main','8625465jHKEwz','yarn\x20dist','/apps','createWorkspacePkgJson','/shared/','pkg','shared','error','holder_name','apps','9799524ItLNFH'];a40_0x13ac=function(){return _0x417ef9;};return a40_0x13ac();}const log=require('./logger'),findWorkspaceRoot=require('find-yarn-workspace-root'),{execSync}=require('child_process'),{resolve,basename}=require('path'),{writeFileSync,existsSync}=require('fs');class BotDistributor{constructor(_0x1a86bc){const _0x40924d=a40_0x324d;this[_0x40924d(0x9e)]={'base_dir':process['cwd'](),'output_dir':_0x40924d(0xaf),..._0x1a86bc},this[_0x40924d(0x72)]=resolve(this[_0x40924d(0x9e)][_0x40924d(0x9d)],_0x40924d(0xa8)),this[_0x40924d(0x89)]=this[_0x40924d(0xb2)](),this[_0x40924d(0x90)]=findWorkspaceRoot(this['opts'][_0x40924d(0x9d)])||this['opts'][_0x40924d(0x9d)],this[_0x40924d(0xb1)]=resolve(this['opts'][_0x40924d(0x9d)],_0x40924d(0x94)),this[_0x40924d(0x8c)]=basename(this['holder_dir']),this[_0x40924d(0x74)]=resolve(this[_0x40924d(0x9e)]['output_dir'],basename(this['pkg'][_0x40924d(0x7d)])),this[_0x40924d(0x95)]=resolve(this[_0x40924d(0x74)],_0x40924d(0x76));}[a40_0x2fa316(0xb2)](){const _0x2e1bb0=a40_0x2fa316;try{return require(this.pkg_dir);}catch(_0x25fa92){return console[_0x2e1bb0(0x8b)]('Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.'),{};}}['_copyDir'](_0x36ae46,_0x20960f,{cwd:_0x20d889}={}){const _0x14e25c=a40_0x2fa316;execSync(_0x14e25c(0x9b)+_0x36ae46+'\x20'+_0x20960f,{'stdio':'inherit','cwd':_0x20d889});}['_copyDirIfExists'](_0x4b2366,_0x3c8734,_0x4d14a0){const _0x285240=a40_0x2fa316;existsSync(_0x4b2366)&&this[_0x285240(0x7c)](_0x4b2366,_0x3c8734,_0x4d14a0);}[a40_0x2fa316(0x71)](){const _0x4776c2=a40_0x2fa316,{output_dir:_0xd6e5cc}=this[_0x4776c2(0x9e)];execSync(_0x4776c2(0x80)+_0xd6e5cc),execSync('rm\x20-Rf\x20'+this[_0x4776c2(0x95)]);}[a40_0x2fa316(0xac)](){const _0x12251c=a40_0x2fa316;log[_0x12251c(0xa6)]('Coping\x20bot\x20files...'),execSync('mkdir\x20-p\x20'+this[_0x12251c(0x74)]);const {base_dir:_0x9de1f1}=this['opts'];this[_0x12251c(0x7c)]('*',this[_0x12251c(0x74)],{'cwd':_0x9de1f1});}['copySharedFiles'](){const _0x168380=a40_0x2fa316;log[_0x168380(0xa6)]('Coping\x20shared\x20files...');const _0x262a5a=this['opts']['output_dir'];execSync(_0x168380(0xa7)+_0x262a5a+'/'+this[_0x168380(0x8c)]),execSync('mkdir\x20-p\x20'+_0x262a5a+_0x168380(0x86)),this[_0x168380(0x75)](this['workspace_dir']+_0x168380(0x88),_0x262a5a+_0x168380(0x88)),this[_0x168380(0x75)](this[_0x168380(0xb1)]+'/common/',_0x262a5a+'/'+this[_0x168380(0x8c)]+'/common/'),this['_copyDirIfExists'](this['holder_dir']+'/apps/',_0x262a5a+'/'+this[_0x168380(0x8c)]+_0x168380(0x86));const _0x512232=this[_0x168380(0x89)][_0x168380(0x8d)]||[];for(const _0x3eae32 of _0x512232){this[_0x168380(0x7c)](this[_0x168380(0x90)]+_0x168380(0xa2)+_0x3eae32+'/',_0x262a5a+_0x168380(0xa2)+_0x3eae32+'/');}}['installDepedencies'](){const _0x1ef2d0=a40_0x2fa316;log['info'](_0x1ef2d0(0xb0));const {output_dir:_0xd88419}=this['opts'];execSync(_0x1ef2d0(0x9c),{'stdio':_0x1ef2d0(0x99),'cwd':_0xd88419});}['changePkgForDist'](){const _0x38ac3f=a40_0x2fa316,_0x5daf40=this[_0x38ac3f(0x89)];_0x5daf40[_0x38ac3f(0xaa)]=_0x5daf40[_0x38ac3f(0xaa)]||'./index.js',_0x5daf40[_0x38ac3f(0x83)]=_0x5daf40[_0x38ac3f(0x83)]||_0x38ac3f(0x98);const _0x440cb8=_0x5daf40[_0x38ac3f(0xad)]||{},_0x26cf4a=Array['isArray'](_0x440cb8[_0x38ac3f(0x8f)])?_0x440cb8[_0x38ac3f(0x8f)]:_0x440cb8['assets']?[_0x440cb8[_0x38ac3f(0x8f)]]:[];_0x5daf40[_0x38ac3f(0x89)]={'scripts':[_0x38ac3f(0xa5),..._0x440cb8[_0x38ac3f(0xab)]||[]],'assets':['./src/assets/**',_0x38ac3f(0x7b),..._0x26cf4a],'outputPath':_0x38ac3f(0x76)},_0x5daf40['scripts']={..._0x5daf40['scripts'],'dist':_0x38ac3f(0x82)},writeFileSync(resolve(this[_0x38ac3f(0x74)],'package.json'),JSON['stringify'](_0x5daf40));}[a40_0x2fa316(0x76)](){const _0x19a017=a40_0x2fa316;this[_0x19a017(0x71)](),this['copySourceFiles'](),this['copySharedFiles'](),this[_0x19a017(0x87)](),this[_0x19a017(0x7a)](),this[_0x19a017(0x9a)](),execSync(_0x19a017(0x85),{'stdio':'inherit','cwd':this[_0x19a017(0x74)]});}[a40_0x2fa316(0xa1)](){const _0x3fbd60=a40_0x2fa316;execSync('mv\x20'+this[_0x3fbd60(0x95)]+'\x20'+this[_0x3fbd60(0x9e)][_0x3fbd60(0x9d)]+_0x3fbd60(0x9f));}[a40_0x2fa316(0x91)](){const _0x398c24=a40_0x2fa316;execSync(_0x398c24(0x80)+this[_0x398c24(0x9e)][_0x398c24(0x9d)]+_0x398c24(0x9f));}['createWorkspacePkgJson'](){const _0x5b9f39=a40_0x2fa316,_0x404467={'name':_0x5b9f39(0xa9),'private':!![],'workspaces':{'packages':[basename(this['bot_dir']),_0x5b9f39(0x8a),'apps/*',this[_0x5b9f39(0x8c)]+'/*']},'author':_0x5b9f39(0xae),'license':_0x5b9f39(0x96)};writeFileSync(resolve(this[_0x5b9f39(0x9e)][_0x5b9f39(0x81)],_0x5b9f39(0xa8)),JSON[_0x5b9f39(0xa0)](_0x404467));}}module[a40_0x2fa316(0x92)]=BotDistributor;