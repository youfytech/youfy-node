function a40_0x5729(_0x1efb9a,_0x4a6443){const _0x45c24f=a40_0x45c2();return a40_0x5729=function(_0x5729bc,_0x43c674){_0x5729bc=_0x5729bc-0x149;let _0x305cf6=_0x45c24f[_0x5729bc];return _0x305cf6;},a40_0x5729(_0x1efb9a,_0x4a6443);}const a40_0x115c4f=a40_0x5729;function a40_0x45c2(){const _0x69014c=['workspace_dir','/tmp/yfy_bot_workspace_dist','../','./index.js','info','rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20','10CUaxie','isArray','getPackage','/shared/','4VpwYsD','bin','assets','./src/assets/**','pkg_extras','4825919KzhUHk','scripts','9MoSFLu','exports','Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.','cwd','mkdir\x20-p\x20','holder_name','mv\x20','1172488FfSnqb','dist_dir','/apps/','/common/','shared','yarn\x20install','1263208SWSNlq','yarn\x20dist','removeTempFiles','package.json','1624329lWHsrI','pkg','createWorkspacePkgJson','inherit','pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public','Coping\x20bot\x20files...','base_dir','_copyDirIfExists','Alan\x20Bacelar\x20<alan@youfy.com.br>','opts','apps/*','/apps','**/*.js','bot_dir','output_dir','installDepedencies','rm\x20-Rf\x20','402470eUCQTU','5690850NehbtT','moveToBaseDir','Install\x20bot\x20dependecies...','bots','holder_dir','changePkgForDist','dist','/dist','copySourceFiles','11ygEQrk','stringify','./src/index.js','1277922DHnNIa','_copyDir','copySharedFiles'];a40_0x45c2=function(){return _0x69014c;};return a40_0x45c2();}(function(_0x348e40,_0x286503){const _0x2e633c=a40_0x5729,_0x2b5d03=_0x348e40();while(!![]){try{const _0x3dc678=-parseInt(_0x2e633c(0x166))/0x1*(parseInt(_0x2e633c(0x14c))/0x2)+parseInt(_0x2e633c(0x17e))/0x3+-parseInt(_0x2e633c(0x174))/0x4+parseInt(_0x2e633c(0x162))/0x5*(-parseInt(_0x2e633c(0x159))/0x6)+parseInt(_0x2e633c(0x16b))/0x7+parseInt(_0x2e633c(0x17a))/0x8*(parseInt(_0x2e633c(0x16d))/0x9)+parseInt(_0x2e633c(0x14d))/0xa*(parseInt(_0x2e633c(0x156))/0xb);if(_0x3dc678===_0x286503)break;else _0x2b5d03['push'](_0x2b5d03['shift']());}catch(_0x3eeefc){_0x2b5d03['push'](_0x2b5d03['shift']());}}}(a40_0x45c2,0x69e92));const log=require('./logger'),findWorkspaceRoot=require('find-yarn-workspace-root'),{execSync}=require('child_process'),{resolve,basename}=require('path'),{writeFileSync,existsSync}=require('fs');class BotDistributor{constructor(_0x345359){const _0x1bb60f=a40_0x5729;this[_0x1bb60f(0x187)]={'base_dir':process[_0x1bb60f(0x170)](),'output_dir':_0x1bb60f(0x15d),..._0x345359},this['pkg_dir']=resolve(this['opts'][_0x1bb60f(0x184)],_0x1bb60f(0x17d)),this['pkg']=this[_0x1bb60f(0x164)](),this[_0x1bb60f(0x15c)]=findWorkspaceRoot(this[_0x1bb60f(0x187)][_0x1bb60f(0x184)])||this[_0x1bb60f(0x187)]['base_dir'],this[_0x1bb60f(0x151)]=resolve(this[_0x1bb60f(0x187)][_0x1bb60f(0x184)],_0x1bb60f(0x15e)),this[_0x1bb60f(0x172)]=basename(this['holder_dir']),this[_0x1bb60f(0x18b)]=resolve(this[_0x1bb60f(0x187)][_0x1bb60f(0x149)],basename(this[_0x1bb60f(0x17f)]['name'])),this['dist_dir']=resolve(this[_0x1bb60f(0x18b)],_0x1bb60f(0x153));}[a40_0x115c4f(0x164)](){const _0x3fdfcd=a40_0x115c4f;try{return require(this.pkg_dir);}catch(_0x261b0f){return console['error'](_0x3fdfcd(0x16f)),{};}}[a40_0x115c4f(0x15a)](_0x1cabf1,_0x3c581d,{cwd:_0x34fa14}={}){const _0x3db15f=a40_0x115c4f;execSync(_0x3db15f(0x161)+_0x1cabf1+'\x20'+_0x3c581d,{'stdio':_0x3db15f(0x181),'cwd':_0x34fa14});}[a40_0x115c4f(0x185)](_0x389ccf,_0x10a61d,_0x4920fc){const _0x165061=a40_0x115c4f;existsSync(_0x389ccf)&&this[_0x165061(0x15a)](_0x389ccf,_0x10a61d,_0x4920fc);}[a40_0x115c4f(0x17c)](){const _0x4e09ad=a40_0x115c4f,{output_dir:_0x1d8081}=this['opts'];execSync(_0x4e09ad(0x14b)+_0x1d8081),execSync('rm\x20-Rf\x20'+this['dist_dir']);}['copySourceFiles'](){const _0x27b2af=a40_0x115c4f;log['info'](_0x27b2af(0x183)),execSync(_0x27b2af(0x171)+this[_0x27b2af(0x18b)]);const {base_dir:_0x23cb07}=this[_0x27b2af(0x187)];this[_0x27b2af(0x15a)]('*',this[_0x27b2af(0x18b)],{'cwd':_0x23cb07});}[a40_0x115c4f(0x15b)](){const _0x3c45ee=a40_0x115c4f;log['info']('Coping\x20shared\x20files...');const _0x3dd941=this[_0x3c45ee(0x187)][_0x3c45ee(0x149)];execSync('mkdir\x20-p\x20'+_0x3dd941+'/'+this[_0x3c45ee(0x172)]),execSync(_0x3c45ee(0x171)+_0x3dd941+_0x3c45ee(0x189)),this[_0x3c45ee(0x185)](this[_0x3c45ee(0x15c)]+_0x3c45ee(0x165),_0x3dd941+_0x3c45ee(0x165)),this[_0x3c45ee(0x185)](this[_0x3c45ee(0x151)]+'/common/',_0x3dd941+'/'+this[_0x3c45ee(0x172)]+_0x3c45ee(0x177)),this[_0x3c45ee(0x185)](this[_0x3c45ee(0x151)]+'/apps/',_0x3dd941+'/'+this[_0x3c45ee(0x172)]+'/apps');const _0xecbf34=this[_0x3c45ee(0x17f)]['apps']||[];for(const _0x3dad3f of _0xecbf34){this[_0x3c45ee(0x15a)](this['workspace_dir']+'/apps/'+_0x3dad3f+'/',_0x3dd941+_0x3c45ee(0x176)+_0x3dad3f+'/');}}[a40_0x115c4f(0x14a)](){const _0x2987e5=a40_0x115c4f;log[_0x2987e5(0x160)](_0x2987e5(0x14f));const {output_dir:_0x3878ee}=this['opts'];execSync(_0x2987e5(0x179),{'stdio':_0x2987e5(0x181),'cwd':_0x3878ee});}[a40_0x115c4f(0x152)](){const _0x1e723c=a40_0x115c4f,_0x1d0621=this['pkg'];_0x1d0621[_0x1e723c(0x167)]=_0x1d0621[_0x1e723c(0x167)]||_0x1e723c(0x15f),_0x1d0621['main']=_0x1d0621['main']||_0x1e723c(0x158);const _0x3b281d=_0x1d0621[_0x1e723c(0x16a)]||{},_0x34d62a=Array[_0x1e723c(0x163)](_0x3b281d[_0x1e723c(0x168)])?_0x3b281d['assets']:_0x3b281d['assets']?[_0x3b281d['assets']]:[];_0x1d0621['pkg']={'scripts':[_0x1e723c(0x18a),..._0x3b281d[_0x1e723c(0x16c)]||[]],'assets':[_0x1e723c(0x169),'**/*.html',..._0x34d62a],'outputPath':_0x1e723c(0x153)},_0x1d0621[_0x1e723c(0x16c)]={..._0x1d0621['scripts'],'dist':_0x1e723c(0x182)},writeFileSync(resolve(this[_0x1e723c(0x18b)],_0x1e723c(0x17d)),JSON[_0x1e723c(0x157)](_0x1d0621));}['dist'](){const _0x368d69=a40_0x115c4f;this[_0x368d69(0x17c)](),this[_0x368d69(0x155)](),this[_0x368d69(0x15b)](),this[_0x368d69(0x180)](),this[_0x368d69(0x152)](),this[_0x368d69(0x14a)](),execSync(_0x368d69(0x17b),{'stdio':_0x368d69(0x181),'cwd':this[_0x368d69(0x18b)]});}[a40_0x115c4f(0x14e)](){const _0x5b0ccf=a40_0x115c4f;execSync(_0x5b0ccf(0x173)+this[_0x5b0ccf(0x175)]+'\x20'+this[_0x5b0ccf(0x187)]['base_dir']+_0x5b0ccf(0x154));}['removeBaseDistDir'](){const _0xc1ff0d=a40_0x115c4f;execSync(_0xc1ff0d(0x14b)+this[_0xc1ff0d(0x187)][_0xc1ff0d(0x184)]+_0xc1ff0d(0x154));}[a40_0x115c4f(0x180)](){const _0x2f41f2=a40_0x115c4f,_0x3e2fc4={'name':_0x2f41f2(0x150),'private':!![],'workspaces':{'packages':[basename(this['bot_dir']),_0x2f41f2(0x178),_0x2f41f2(0x188),this[_0x2f41f2(0x172)]+'/*']},'author':_0x2f41f2(0x186),'license':'ISC'};writeFileSync(resolve(this[_0x2f41f2(0x187)][_0x2f41f2(0x149)],'package.json'),JSON[_0x2f41f2(0x157)](_0x3e2fc4));}}module[a40_0x115c4f(0x16e)]=BotDistributor;