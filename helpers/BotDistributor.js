const a40_0x4746d8=a40_0x9a2a;(function(_0x121d98,_0x38bca2){const _0x5854e5=a40_0x9a2a,_0x476fdf=_0x121d98();while(!![]){try{const _0x2dfe29=-parseInt(_0x5854e5(0x170))/0x1+-parseInt(_0x5854e5(0x187))/0x2*(parseInt(_0x5854e5(0x190))/0x3)+-parseInt(_0x5854e5(0x194))/0x4*(-parseInt(_0x5854e5(0x1a6))/0x5)+-parseInt(_0x5854e5(0x1a4))/0x6+-parseInt(_0x5854e5(0x1a5))/0x7+parseInt(_0x5854e5(0x175))/0x8+parseInt(_0x5854e5(0x1a7))/0x9*(parseInt(_0x5854e5(0x1ad))/0xa);if(_0x2dfe29===_0x38bca2)break;else _0x476fdf['push'](_0x476fdf['shift']());}catch(_0x51a8c9){_0x476fdf['push'](_0x476fdf['shift']());}}}(a40_0x2e3a,0xd58c2));const log=require('./logger'),findWorkspaceRoot=require('find-yarn-workspace-root'),{execSync}=require('child_process'),{resolve,basename}=require('path'),{writeFileSync,existsSync}=require('fs');function a40_0x2e3a(){const _0x16f5df=['../','package.json','bots','name','createWorkspacePkgJson','**/*.js','apps/*','holder_name','mv\x20','mkdir\x20-p\x20','17474gwfeKq','installDepedencies','_copyDir','info','assets','dist','pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public','workspace_dir','scripts','93fTfriV','/shared/','ISC','moveToBaseDir','28XBKEsF','shared','bot_dir','exports','pkg','copySharedFiles','pkg_extras','rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20','output_dir','**/*.html','copySourceFiles','dist_dir','Coping\x20shared\x20files...','Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.','main','/apps/','1311384GObnLP','10423756cfYTKR','786815PtKbBL','9AmcoyM','error','isArray','/apps','Install\x20bot\x20dependecies...','_copyDirIfExists','10138190lkmmnb','./src/assets/**','base_dir','removeTempFiles','/common/','rm\x20-Rf\x20','838184QZQTzt','inherit','bin','opts','apps','12608264QTMfay','holder_dir','./src/index.js','yarn\x20dist','getPackage','./index.js','Alan\x20Bacelar\x20<alan@youfy.com.br>','stringify'];a40_0x2e3a=function(){return _0x16f5df;};return a40_0x2e3a();}function a40_0x9a2a(_0x3e5a93,_0x4b4908){const _0x2e3a8e=a40_0x2e3a();return a40_0x9a2a=function(_0x9a2a58,_0x2becdc){_0x9a2a58=_0x9a2a58-0x16c;let _0x1d09ad=_0x2e3a8e[_0x9a2a58];return _0x1d09ad;},a40_0x9a2a(_0x3e5a93,_0x4b4908);}class BotDistributor{constructor(_0x3ade94){const _0x275455=a40_0x9a2a;this[_0x275455(0x173)]={'base_dir':process['cwd'](),'output_dir':'/tmp/yfy_bot_workspace_dist',..._0x3ade94},this['pkg_dir']=resolve(this[_0x275455(0x173)][_0x275455(0x16c)],_0x275455(0x17e)),this[_0x275455(0x198)]=this[_0x275455(0x179)](),this[_0x275455(0x18e)]=findWorkspaceRoot(this[_0x275455(0x173)][_0x275455(0x16c)])||this[_0x275455(0x173)][_0x275455(0x16c)],this[_0x275455(0x176)]=resolve(this[_0x275455(0x173)][_0x275455(0x16c)],_0x275455(0x17d)),this[_0x275455(0x184)]=basename(this['holder_dir']),this[_0x275455(0x196)]=resolve(this[_0x275455(0x173)]['output_dir'],basename(this['pkg'][_0x275455(0x180)])),this[_0x275455(0x19f)]=resolve(this[_0x275455(0x196)],_0x275455(0x18c));}[a40_0x4746d8(0x179)](){const _0x5e877d=a40_0x4746d8;try{return require(this.pkg_dir);}catch(_0x42d9da){return console[_0x5e877d(0x1a8)](_0x5e877d(0x1a1)),{};}}[a40_0x4746d8(0x189)](_0x5114ef,_0x5b064d,{cwd:_0x27bf8d}={}){const _0x3d3fb9=a40_0x4746d8;execSync(_0x3d3fb9(0x19b)+_0x5114ef+'\x20'+_0x5b064d,{'stdio':_0x3d3fb9(0x171),'cwd':_0x27bf8d});}[a40_0x4746d8(0x1ac)](_0xfba134,_0x4de706,_0x120c87){const _0xde7ebc=a40_0x4746d8;existsSync(_0xfba134)&&this[_0xde7ebc(0x189)](_0xfba134,_0x4de706,_0x120c87);}['removeTempFiles'](){const _0x4d95bf=a40_0x4746d8,{output_dir:_0x10b235}=this[_0x4d95bf(0x173)];execSync(_0x4d95bf(0x16f)+_0x10b235),execSync(_0x4d95bf(0x16f)+this[_0x4d95bf(0x19f)]);}[a40_0x4746d8(0x19e)](){const _0xfe299e=a40_0x4746d8;log[_0xfe299e(0x18a)]('Coping\x20bot\x20files...'),execSync(_0xfe299e(0x186)+this[_0xfe299e(0x196)]);const {base_dir:_0x3f47fb}=this[_0xfe299e(0x173)];this[_0xfe299e(0x189)]('*',this[_0xfe299e(0x196)],{'cwd':_0x3f47fb});}[a40_0x4746d8(0x199)](){const _0xec61a8=a40_0x4746d8;log[_0xec61a8(0x18a)](_0xec61a8(0x1a0));const _0x538e66=this[_0xec61a8(0x173)]['output_dir'];execSync(_0xec61a8(0x186)+_0x538e66+'/'+this[_0xec61a8(0x184)]),execSync(_0xec61a8(0x186)+_0x538e66+'/apps'),this['_copyDirIfExists'](this[_0xec61a8(0x18e)]+_0xec61a8(0x191),_0x538e66+_0xec61a8(0x191)),this['_copyDirIfExists'](this[_0xec61a8(0x176)]+'/common/',_0x538e66+'/'+this[_0xec61a8(0x184)]+_0xec61a8(0x16e)),this[_0xec61a8(0x1ac)](this[_0xec61a8(0x176)]+'/apps/',_0x538e66+'/'+this[_0xec61a8(0x184)]+_0xec61a8(0x1aa));const _0x1041a6=this[_0xec61a8(0x198)][_0xec61a8(0x174)]||[];for(const _0x51f390 of _0x1041a6){this[_0xec61a8(0x189)](this[_0xec61a8(0x18e)]+_0xec61a8(0x1a3)+_0x51f390+'/',_0x538e66+_0xec61a8(0x1a3)+_0x51f390+'/');}}[a40_0x4746d8(0x188)](){const _0xe46a09=a40_0x4746d8;log['info'](_0xe46a09(0x1ab));const {output_dir:_0x9bacf8}=this[_0xe46a09(0x173)];execSync('yarn\x20install',{'stdio':_0xe46a09(0x171),'cwd':_0x9bacf8});}['changePkgForDist'](){const _0x46a1f0=a40_0x4746d8,_0x3b1213=this['pkg'];_0x3b1213['bin']=_0x3b1213[_0x46a1f0(0x172)]||_0x46a1f0(0x17a),_0x3b1213[_0x46a1f0(0x1a2)]=_0x3b1213[_0x46a1f0(0x1a2)]||_0x46a1f0(0x177);const _0x57dac0=_0x3b1213[_0x46a1f0(0x19a)]||{},_0x302fe1=Array[_0x46a1f0(0x1a9)](_0x57dac0['assets'])?_0x57dac0[_0x46a1f0(0x18b)]:_0x57dac0[_0x46a1f0(0x18b)]?[_0x57dac0[_0x46a1f0(0x18b)]]:[];_0x3b1213[_0x46a1f0(0x198)]={'scripts':[_0x46a1f0(0x182),..._0x57dac0[_0x46a1f0(0x18f)]||[]],'assets':[_0x46a1f0(0x1ae),_0x46a1f0(0x19d),..._0x302fe1],'outputPath':'dist'},_0x3b1213[_0x46a1f0(0x18f)]={..._0x3b1213[_0x46a1f0(0x18f)],'dist':_0x46a1f0(0x18d)},writeFileSync(resolve(this[_0x46a1f0(0x196)],_0x46a1f0(0x17e)),JSON[_0x46a1f0(0x17c)](_0x3b1213));}[a40_0x4746d8(0x18c)](){const _0x2e1aad=a40_0x4746d8;this[_0x2e1aad(0x16d)](),this['copySourceFiles'](),this[_0x2e1aad(0x199)](),this[_0x2e1aad(0x181)](),this['changePkgForDist'](),this[_0x2e1aad(0x188)](),execSync(_0x2e1aad(0x178),{'stdio':_0x2e1aad(0x171),'cwd':this[_0x2e1aad(0x196)]});}[a40_0x4746d8(0x193)](){const _0x12a6c7=a40_0x4746d8;execSync(_0x12a6c7(0x185)+this[_0x12a6c7(0x19f)]+'\x20'+this[_0x12a6c7(0x173)]['base_dir']+'/dist');}['removeBaseDistDir'](){const _0x2aedb4=a40_0x4746d8;execSync(_0x2aedb4(0x16f)+this[_0x2aedb4(0x173)][_0x2aedb4(0x16c)]+'/dist');}[a40_0x4746d8(0x181)](){const _0x4586be=a40_0x4746d8,_0x502cf3={'name':_0x4586be(0x17f),'private':!![],'workspaces':{'packages':[basename(this[_0x4586be(0x196)]),_0x4586be(0x195),_0x4586be(0x183),this[_0x4586be(0x184)]+'/*']},'author':_0x4586be(0x17b),'license':_0x4586be(0x192)};writeFileSync(resolve(this[_0x4586be(0x173)][_0x4586be(0x19c)],_0x4586be(0x17e)),JSON['stringify'](_0x502cf3));}}module[a40_0x4746d8(0x197)]=BotDistributor;