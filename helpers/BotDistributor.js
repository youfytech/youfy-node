const a40_0x26c440=a40_0x1c34;(function(_0x3c309a,_0x492b0d){const _0x278f87=a40_0x1c34,_0x577d06=_0x3c309a();while(!![]){try{const _0x193533=parseInt(_0x278f87(0xa3))/0x1*(-parseInt(_0x278f87(0xa1))/0x2)+-parseInt(_0x278f87(0xa8))/0x3*(parseInt(_0x278f87(0xd4))/0x4)+parseInt(_0x278f87(0xbe))/0x5*(-parseInt(_0x278f87(0x99))/0x6)+-parseInt(_0x278f87(0x95))/0x7*(parseInt(_0x278f87(0x91))/0x8)+parseInt(_0x278f87(0x90))/0x9*(-parseInt(_0x278f87(0xd0))/0xa)+parseInt(_0x278f87(0xd5))/0xb*(-parseInt(_0x278f87(0x94))/0xc)+parseInt(_0x278f87(0x93))/0xd;if(_0x193533===_0x492b0d)break;else _0x577d06['push'](_0x577d06['shift']());}catch(_0x374642){_0x577d06['push'](_0x577d06['shift']());}}}(a40_0x33b4,0xf1127));const log=require('./logger'),findWorkspaceRoot=require(a40_0x26c440(0xae)),{execSync}=require(a40_0x26c440(0xa5)),{resolve,basename}=require(a40_0x26c440(0xbf)),{writeFileSync,existsSync}=require('fs');class BotDistributor{constructor(_0x44f391){const _0x151405=a40_0x26c440;this[_0x151405(0xcf)]={'base_dir':process[_0x151405(0x9b)](),'output_dir':'/tmp/yfy_bot_workspace_dist',..._0x44f391},this[_0x151405(0x8c)]=resolve(this[_0x151405(0xcf)][_0x151405(0xbc)],_0x151405(0x8b)),this[_0x151405(0xa6)]=this['getPackage'](),this[_0x151405(0xc2)]=findWorkspaceRoot(this['opts']['base_dir'])||this[_0x151405(0xcf)]['base_dir'],this[_0x151405(0x8f)]=resolve(this[_0x151405(0xcf)]['base_dir'],_0x151405(0x97)),this[_0x151405(0xc3)]=basename(this[_0x151405(0x8f)]),this[_0x151405(0xb3)]=resolve(this[_0x151405(0xcf)]['output_dir'],basename(this[_0x151405(0xa6)]['name'])),this[_0x151405(0xb7)]=resolve(this['bot_dir'],_0x151405(0x9c));}['getPackage'](){const _0x197332=a40_0x26c440;try{return require(this[_0x197332(0x8c)]);}catch(_0x204d0c){return console[_0x197332(0xd2)](_0x197332(0xba)),{};}}['_copyDir'](_0x946718,_0x2e2434,{cwd:_0x56dc81}={}){const _0x4de3f5=a40_0x26c440;execSync('rsync\x20--recursive\x20--exclude\x20\x27node_modules\x27\x20--exclude\x20\x27.git\x27\x20'+_0x946718+'\x20'+_0x2e2434,{'stdio':_0x4de3f5(0x92),'cwd':_0x56dc81});}[a40_0x26c440(0xac)](_0x137f0b,_0x13def,_0x306c2e){existsSync(_0x137f0b)&&this['_copyDir'](_0x137f0b,_0x13def,_0x306c2e);}[a40_0x26c440(0xc0)](){const _0x5b70f2=a40_0x26c440,{output_dir:_0x163481}=this[_0x5b70f2(0xcf)];execSync(_0x5b70f2(0xca)+_0x163481),execSync(_0x5b70f2(0xca)+this['dist_dir']);}['copySourceFiles'](){const _0x162d03=a40_0x26c440;log['info'](_0x162d03(0x8a)),execSync(_0x162d03(0xb6)+this[_0x162d03(0xb3)]);const {base_dir:_0x143380}=this[_0x162d03(0xcf)];this[_0x162d03(0xc9)]('*',this[_0x162d03(0xb3)],{'cwd':_0x143380});}['copySharedFiles'](){const _0x3e10ae=a40_0x26c440;log[_0x3e10ae(0x9f)](_0x3e10ae(0xa0));const _0x36c0e2=this[_0x3e10ae(0xcf)][_0x3e10ae(0xbd)];execSync(_0x3e10ae(0xb6)+_0x36c0e2+'/'+this[_0x3e10ae(0xc3)]),execSync(_0x3e10ae(0xb6)+_0x36c0e2+_0x3e10ae(0x98)),this[_0x3e10ae(0xac)](this[_0x3e10ae(0xc2)]+_0x3e10ae(0x9e),_0x36c0e2+_0x3e10ae(0x9e)),this['_copyDirIfExists'](this['holder_dir']+_0x3e10ae(0xc4),_0x36c0e2+'/'+this[_0x3e10ae(0xc3)]+_0x3e10ae(0xc4)),this[_0x3e10ae(0xac)](this[_0x3e10ae(0x8f)]+_0x3e10ae(0xc7),_0x36c0e2+'/'+this[_0x3e10ae(0xc3)]+'/apps');const _0x23446a=this[_0x3e10ae(0xa6)][_0x3e10ae(0xaf)]||[];for(const _0x50e33c of _0x23446a){this[_0x3e10ae(0xc9)](this['workspace_dir']+_0x3e10ae(0xc7)+_0x50e33c+'/',_0x36c0e2+_0x3e10ae(0xc7)+_0x50e33c+'/');}}[a40_0x26c440(0xb0)](){const _0x4ac1c8=a40_0x26c440;log[_0x4ac1c8(0x9f)](_0x4ac1c8(0xd3));const {output_dir:_0x4ee899}=this[_0x4ac1c8(0xcf)];execSync(_0x4ac1c8(0x8d),{'stdio':_0x4ac1c8(0x92),'cwd':_0x4ee899});}[a40_0x26c440(0xc5)](){const _0xfee48c=a40_0x26c440,_0x241252=this['pkg'];_0x241252['bin']=_0x241252[_0xfee48c(0xa7)]||'./index.js',_0x241252['main']=_0x241252[_0xfee48c(0x96)]||_0xfee48c(0x9d);const _0x3f439d=_0x241252[_0xfee48c(0xc1)]||{},_0x36d3cf=Array[_0xfee48c(0xad)](_0x3f439d['assets'])?_0x3f439d[_0xfee48c(0xa9)]:_0x3f439d['assets']?[_0x3f439d[_0xfee48c(0xa9)]]:[];_0x241252[_0xfee48c(0xa6)]={'scripts':[_0xfee48c(0x9a),..._0x3f439d['scripts']||[]],'assets':[_0xfee48c(0xa2),_0xfee48c(0xb4),..._0x36d3cf],'outputPath':_0xfee48c(0x9c)},_0x241252['scripts']={..._0x241252[_0xfee48c(0xc8)],'dist':_0xfee48c(0xb2)},writeFileSync(resolve(this[_0xfee48c(0xb3)],_0xfee48c(0x8b)),JSON[_0xfee48c(0x8e)](_0x241252));}['dist'](){const _0x2a2418=a40_0x26c440;this[_0x2a2418(0xc0)](),this[_0x2a2418(0xcc)](),this[_0x2a2418(0xc6)](),this[_0x2a2418(0xb1)](),this[_0x2a2418(0xc5)](),this[_0x2a2418(0xb0)](),execSync(_0x2a2418(0xab),{'stdio':_0x2a2418(0x92),'cwd':this[_0x2a2418(0xb3)]});}[a40_0x26c440(0xbb)](){const _0x230071=a40_0x26c440;execSync(_0x230071(0xb5)+this['dist_dir']+'\x20'+this[_0x230071(0xcf)][_0x230071(0xbc)]+'/dist');}[a40_0x26c440(0xaa)](){const _0xa13cb9=a40_0x26c440;execSync('rm\x20-Rf\x20'+this[_0xa13cb9(0xcf)][_0xa13cb9(0xbc)]+_0xa13cb9(0xb8));}[a40_0x26c440(0xb1)](){const _0x19fdb9=a40_0x26c440,_0x127206={'name':_0x19fdb9(0xcb),'private':!![],'workspaces':{'packages':[basename(this[_0x19fdb9(0xb3)]),_0x19fdb9(0xce),_0x19fdb9(0xd1),this['holder_name']+'/*']},'author':_0x19fdb9(0xa4),'license':_0x19fdb9(0xb9)};writeFileSync(resolve(this[_0x19fdb9(0xcf)]['output_dir'],_0x19fdb9(0x8b)),JSON['stringify'](_0x127206));}}function a40_0x1c34(_0x396226,_0x4a072f){const _0x33b418=a40_0x33b4();return a40_0x1c34=function(_0x1c3477,_0x5d20c4){_0x1c3477=_0x1c3477-0x8a;let _0x52e077=_0x33b418[_0x1c3477];return _0x52e077;},a40_0x1c34(_0x396226,_0x4a072f);}function a40_0x33b4(){const _0x3c2f75=['package.json','pkg_dir','yarn\x20install','stringify','holder_dir','9Fvryxw','8pwfhaV','inherit','64850513FfoqlR','2004wwVtEd','1535135sUSHxm','main','../','/apps','193818wnUMdi','**/*.js','cwd','dist','./src/index.js','/shared/','info','Coping\x20shared\x20files...','2737934uvpMBI','./src/assets/**','1zsmaTz','Alan\x20Bacelar\x20<alan@youfy.com.br>','child_process','pkg','bin','650979iEDgzf','assets','removeBaseDistDir','yarn\x20dist','_copyDirIfExists','isArray','find-yarn-workspace-root','apps','installDepedencies','createWorkspacePkgJson','pkg\x20--public-packages\x20\x22*\x22\x20.\x20--public','bot_dir','**/*.html','mv\x20','mkdir\x20-p\x20','dist_dir','/dist','ISC','Package.json\x20not\x20found.\x20It\x20should\x20be\x20in\x20the\x20root\x20of\x20the\x20project.','moveToBaseDir','base_dir','output_dir','65zFgppN','path','removeTempFiles','pkg_extras','workspace_dir','holder_name','/common/','changePkgForDist','copySharedFiles','/apps/','scripts','_copyDir','rm\x20-Rf\x20','bots','copySourceFiles','exports','shared','opts','427400hTeahp','apps/*','error','Install\x20bot\x20dependecies...','4bsVFBa','114158wFgMOj','Coping\x20bot\x20files...'];a40_0x33b4=function(){return _0x3c2f75;};return a40_0x33b4();}module[a40_0x26c440(0xcd)]=BotDistributor;