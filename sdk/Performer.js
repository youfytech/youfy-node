const a68_0x2144e8=a68_0x4950;function a68_0x4950(_0x19e6fa,_0x51c960){const _0x55b632=a68_0x55b6();return a68_0x4950=function(_0x495084,_0xdc588c){_0x495084=_0x495084-0x1a3;let _0x2e6d85=_0x55b632[_0x495084];return _0x2e6d85;},a68_0x4950(_0x19e6fa,_0x51c960);}(function(_0x1eb599,_0x1e3580){const _0x411ee3=a68_0x4950,_0xfb6e95=_0x1eb599();while(!![]){try{const _0xaa3793=parseInt(_0x411ee3(0x1b2))/0x1+parseInt(_0x411ee3(0x1b7))/0x2+parseInt(_0x411ee3(0x1b8))/0x3+-parseInt(_0x411ee3(0x1be))/0x4+-parseInt(_0x411ee3(0x1bc))/0x5+parseInt(_0x411ee3(0x1af))/0x6+-parseInt(_0x411ee3(0x1b9))/0x7;if(_0xaa3793===_0x1e3580)break;else _0xfb6e95['push'](_0xfb6e95['shift']());}catch(_0x1c5203){_0xfb6e95['push'](_0xfb6e95['shift']());}}}(a68_0x55b6,0x84038));const retry=require('async-retry'),logger=require('./Logger'),WorkObject=require('./WorkObject'),EventHandler=require('./EventHandler'),defaultOptions={'retries':0x2};function a68_0x55b6(){const _0x171ef8=['opts','workObjects\x20must\x20be\x20an\x20array','877367zoGWYr','error','retries','isArray','context','748892MheKIw','2982891bfrzBr','4713254gsHoZy','ValidationError','config','3573465ByBApW','initRetry','3177788ipUesi','DONE','done','notDone','dispatch','run','name','exports','object_retries','Work\x20object\x20must\x20be\x20a\x20instance\x20of\x20WorkObject','get','status','forEach','failed','2862480hcnvUx'];a68_0x55b6=function(){return _0x171ef8;};return a68_0x55b6();}class Performer extends EventHandler{constructor(_0x273546,_0x2e6ab4={}){const _0xbbdab1=a68_0x4950;super(),this[_0xbbdab1(0x1b6)]=_0x273546,this[_0xbbdab1(0x1b0)]={...defaultOptions,..._0x2e6ab4},this['retries']=_0x273546[_0xbbdab1(0x1bb)][_0xbbdab1(0x1ab)](_0xbbdab1(0x1a9),this[_0xbbdab1(0x1b0)][_0xbbdab1(0x1b4)]);}async[a68_0x2144e8(0x1a6)](_0x31b164,_0x1f46ee){const _0x53b70f=a68_0x2144e8;if(!(_0x1f46ee instanceof WorkObject)){const _0x116fe6=_0x53b70f(0x1aa);logger[_0x53b70f(0x1b3)](_0x116fe6);throw new Error(_0x116fe6);}if(_0x1f46ee[_0x53b70f(0x1ac)]===_0x53b70f(0x1bf))return;try{await _0x1f46ee['init']();const _0x3f9ac8=async(_0x3441a1,_0x885648)=>{const _0x216db4=_0x53b70f;_0x885648&&await _0x1f46ee[_0x216db4(0x1bd)](_0x885648);try{await _0x31b164(_0x1f46ee,{'bail':_0x3441a1,'attempts':_0x885648});}catch(_0x3eaf0c){if(_0x3eaf0c[_0x216db4(0x1a7)]==='ValidationError'){_0x3441a1(_0x3eaf0c);return;}throw _0x3eaf0c;}},_0x1e1bbd=await retry(_0x3f9ac8,{'retries':this[_0x53b70f(0x1b4)],'onRetry':_0x26ff19=>console[_0x53b70f(0x1b3)](_0x26ff19)});return await _0x1f46ee[_0x53b70f(0x1a3)](),_0x1e1bbd;}catch(_0x247247){_0x247247[_0x53b70f(0x1a7)]===_0x53b70f(0x1ba)?await _0x1f46ee[_0x53b70f(0x1a4)](_0x247247):await _0x1f46ee[_0x53b70f(0x1ae)](_0x247247);await this[_0x53b70f(0x1a5)]('fail',_0x247247);if(_0x247247[_0x53b70f(0x1a7)]==='BreakError')throw _0x247247;}}async[a68_0x2144e8(0x1ad)](_0x200c1a,_0x4eaec1){const _0x34249a=a68_0x2144e8;if(!Array[_0x34249a(0x1b5)](_0x4eaec1))throw new Error(_0x34249a(0x1b1));for(const _0x5e16ab of _0x4eaec1){await this[_0x34249a(0x1a6)](_0x200c1a,_0x5e16ab);}}}module[a68_0x2144e8(0x1a8)]=Performer;