const a62_0x567513=a62_0xafb1;function a62_0x412e(){const _0xf660b4=['getTemplateData','exports','1425266McFEXw','568008yEzPgj','auth','getByName','html','5933190tUaBUq','3465904wMWfmp','3052686aWvoOh','push','email','9020745iBqANd','send','24620032UgDZLF','7qrSBZJ','payload','attachments','compile','addAttachment','sendMail','user','settings'];a62_0x412e=function(){return _0xf660b4;};return a62_0x412e();}(function(_0xa94ad,_0x1d10b7){const _0x219895=a62_0xafb1,_0x1729e9=_0xa94ad();while(!![]){try{const _0x2a15e6=parseInt(_0x219895(0x17d))/0x1+parseInt(_0x219895(0x17c))/0x2+parseInt(_0x219895(0x183))/0x3+parseInt(_0x219895(0x182))/0x4+parseInt(_0x219895(0x186))/0x5+parseInt(_0x219895(0x181))/0x6*(-parseInt(_0x219895(0x189))/0x7)+-parseInt(_0x219895(0x188))/0x8;if(_0x2a15e6===_0x1d10b7)break;else _0x1729e9['push'](_0x1729e9['shift']());}catch(_0x13782c){_0x1729e9['push'](_0x1729e9['shift']());}}}(a62_0x412e,0xdc53b));const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');class Mailer{constructor(_0x2ce0d4){const _0x3e089a=a62_0xafb1;this[_0x3e089a(0x179)]=_0x2ce0d4,this[_0x3e089a(0x180)]='',this[_0x3e089a(0x18b)]=[];}async['getTemplateData'](_0xb41f29){const _0x57d5dc=a62_0xafb1,_0x51fe6e=await TemplateApi[_0x57d5dc(0x17f)](_0xb41f29);if(_0x51fe6e){const _0x1dfc16=_0x51fe6e[_0x57d5dc(0x18a)]||{};return _0x1dfc16[_0x57d5dc(0x180)];}return null;}async['addTemplate'](_0x3ea23a,_0x1e8099){const _0x34c419=a62_0xafb1,_0x3700ab=await this[_0x34c419(0x17a)](_0x3ea23a),_0x40adf3=_0x3700ab?Handlebars[_0x34c419(0x18c)](_0x3700ab):null;this['html']=_0x40adf3(_0x1e8099);}[a62_0x567513(0x18d)](_0x5975a4){const _0x3c5d81=a62_0x567513;this[_0x3c5d81(0x18b)][_0x3c5d81(0x184)](_0x5975a4);}async[a62_0x567513(0x187)](_0x4f2f39){const _0x10b144=a62_0x567513,_0x5e0ab9=this[_0x10b144(0x179)]||await SettingsApi['get'](_0x10b144(0x185)),_0x40ff9c=nodemailer['createTransport'](_0x5e0ab9),_0x6bc5e1=[...this[_0x10b144(0x18b)],..._0x4f2f39[_0x10b144(0x18b)]||[]],_0x58c5ea={'from':_0x5e0ab9[_0x10b144(0x17e)][_0x10b144(0x178)],..._0x4f2f39,'html':this[_0x10b144(0x180)]+(_0x4f2f39[_0x10b144(0x180)]||''),'attachments':_0x6bc5e1};return await _0x40ff9c[_0x10b144(0x177)](_0x58c5ea);}}function a62_0xafb1(_0x2c7568,_0x4fc4d6){const _0x412e12=a62_0x412e();return a62_0xafb1=function(_0xafb172,_0x64ba50){_0xafb172=_0xafb172-0x177;let _0x317f18=_0x412e12[_0xafb172];return _0x317f18;},a62_0xafb1(_0x2c7568,_0x4fc4d6);}module[a62_0x567513(0x17b)]=Mailer;