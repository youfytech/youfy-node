const a62_0x422b3b=a62_0x5c1d;function a62_0x5c1d(_0x4d7f30,_0x2815c0){const _0x3371cd=a62_0x3371();return a62_0x5c1d=function(_0x5c1d41,_0x420017){_0x5c1d41=_0x5c1d41-0x1dd;let _0x10a3c3=_0x3371cd[_0x5c1d41];return _0x10a3c3;},a62_0x5c1d(_0x4d7f30,_0x2815c0);}function a62_0x3371(){const _0x374c0d=['user','send','compile','exports','47619miDzEy','387128gFbYfL','1814120GYBUSK','createTransport','get','email','84TPZins','addTemplate','169981wiHGvf','getTemplateData','attachments','93KIdSox','2659360CEpNAE','856EBDfsc','10310770uLUaJT','html','15366fbiDGf','payload','settings'];a62_0x3371=function(){return _0x374c0d;};return a62_0x3371();}(function(_0x140541,_0x19fe95){const _0x4f457a=a62_0x5c1d,_0x4fa623=_0x140541();while(!![]){try{const _0x4e7732=parseInt(_0x4f457a(0x1ec))/0x1+parseInt(_0x4f457a(0x1e4))/0x2*(-parseInt(_0x4f457a(0x1df))/0x3)+parseInt(_0x4f457a(0x1e0))/0x4+-parseInt(_0x4f457a(0x1ed))/0x5+-parseInt(_0x4f457a(0x1f1))/0x6*(parseInt(_0x4f457a(0x1f3))/0x7)+parseInt(_0x4f457a(0x1e1))/0x8*(-parseInt(_0x4f457a(0x1eb))/0x9)+parseInt(_0x4f457a(0x1e2))/0xa;if(_0x4e7732===_0x19fe95)break;else _0x4fa623['push'](_0x4fa623['shift']());}catch(_0x4a0452){_0x4fa623['push'](_0x4fa623['shift']());}}}(a62_0x3371,0x8c9cd));const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');class Mailer{constructor(_0x3164c3){const _0x48783e=a62_0x5c1d;this[_0x48783e(0x1e6)]=_0x3164c3,this[_0x48783e(0x1e3)]='',this[_0x48783e(0x1de)]=[];}async[a62_0x422b3b(0x1dd)](_0x57603b){const _0x38883c=a62_0x422b3b,_0x11b775=await TemplateApi['getByName'](_0x57603b);if(_0x11b775){const _0x555b38=_0x11b775[_0x38883c(0x1e5)]||{};return _0x555b38['html'];}return null;}async[a62_0x422b3b(0x1f2)](_0x6176dc,_0x2e4ba8){const _0x195c4b=a62_0x422b3b,_0x245778=await this[_0x195c4b(0x1dd)](_0x6176dc),_0x10faac=_0x245778?Handlebars[_0x195c4b(0x1e9)](_0x245778):null;this[_0x195c4b(0x1e3)]=_0x10faac(_0x2e4ba8);}['addAttachment'](_0x4d686f){const _0x358015=a62_0x422b3b;this[_0x358015(0x1de)]['push'](_0x4d686f);}async[a62_0x422b3b(0x1e8)](_0xa8fbb2){const _0xd3fdbe=a62_0x422b3b,_0x5b601c=this['settings']||await SettingsApi[_0xd3fdbe(0x1ef)](_0xd3fdbe(0x1f0)),_0x31d76b=nodemailer[_0xd3fdbe(0x1ee)](_0x5b601c),_0x3bf878=[...this[_0xd3fdbe(0x1de)],..._0xa8fbb2[_0xd3fdbe(0x1de)]||[]],_0x177b7e={'from':_0x5b601c['auth'][_0xd3fdbe(0x1e7)],..._0xa8fbb2,'html':this[_0xd3fdbe(0x1e3)]+(_0xa8fbb2[_0xd3fdbe(0x1e3)]||''),'attachments':_0x3bf878};return await _0x31d76b['sendMail'](_0x177b7e);}}module[a62_0x422b3b(0x1ea)]=Mailer;