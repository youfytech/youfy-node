function a62_0x29d2(_0x13d02e,_0xb3da55){const _0x3349ce=a62_0x3349();return a62_0x29d2=function(_0x29d2c8,_0x1ff6bf){_0x29d2c8=_0x29d2c8-0x189;let _0xbb6523=_0x3349ce[_0x29d2c8];return _0xbb6523;},a62_0x29d2(_0x13d02e,_0xb3da55);}const a62_0x253ff3=a62_0x29d2;function a62_0x3349(){const _0x11683d=['html','17524ligGoe','payload','auth','getTemplateData','260918XKWMgy','40ptbvCo','push','308820PhqZsx','sendMail','attachments','20BrFVIU','exports','email','2152593EDbWKb','214219hEZOVc','50388BMMitv','send','393EfImMT','1823775TUchxw'];a62_0x3349=function(){return _0x11683d;};return a62_0x3349();}(function(_0x2f2419,_0x13b7e5){const _0x17de81=a62_0x29d2,_0x251dc9=_0x2f2419();while(!![]){try{const _0x5a2e8d=-parseInt(_0x17de81(0x18f))/0x1+-parseInt(_0x17de81(0x190))/0x2+-parseInt(_0x17de81(0x192))/0x3*(-parseInt(_0x17de81(0x195))/0x4)+-parseInt(_0x17de81(0x193))/0x5+parseInt(_0x17de81(0x19c))/0x6+parseInt(_0x17de81(0x199))/0x7*(-parseInt(_0x17de81(0x19a))/0x8)+-parseInt(_0x17de81(0x18e))/0x9*(-parseInt(_0x17de81(0x18b))/0xa);if(_0x5a2e8d===_0x13b7e5)break;else _0x251dc9['push'](_0x251dc9['shift']());}catch(_0x255d41){_0x251dc9['push'](_0x251dc9['shift']());}}}(a62_0x3349,0x4c76d));const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');class Mailer{constructor(_0x13f555){const _0x2eec01=a62_0x29d2;this['settings']=_0x13f555,this[_0x2eec01(0x194)]='',this[_0x2eec01(0x18a)]=[];}async[a62_0x253ff3(0x198)](_0x4bbd60){const _0x60e52b=a62_0x253ff3,_0x5cdac5=await TemplateApi['getByName'](_0x4bbd60);if(_0x5cdac5){const _0x1e4f09=_0x5cdac5[_0x60e52b(0x196)]||{};return _0x1e4f09[_0x60e52b(0x194)];}return null;}async['addTemplate'](_0x47d6b1,_0x489bb9){const _0x5546f5=a62_0x253ff3,_0x24845c=await this[_0x5546f5(0x198)](_0x47d6b1),_0x1b179a=_0x24845c?Handlebars['compile'](_0x24845c):null;this[_0x5546f5(0x194)]=_0x1b179a(_0x489bb9);}['addAttachment'](_0x4db118){const _0x569f19=a62_0x253ff3;this[_0x569f19(0x18a)][_0x569f19(0x19b)](_0x4db118);}async[a62_0x253ff3(0x191)](_0x39aa67){const _0x1b7fd7=a62_0x253ff3,_0x5d2daa=this['settings']||await SettingsApi['get'](_0x1b7fd7(0x18d)),_0x4c7304=nodemailer['createTransport'](_0x5d2daa),_0x459017=[...this[_0x1b7fd7(0x18a)],..._0x39aa67[_0x1b7fd7(0x18a)]||[]],_0x290ec6={'from':_0x5d2daa[_0x1b7fd7(0x197)]['user'],..._0x39aa67,'html':this[_0x1b7fd7(0x194)]+(_0x39aa67['html']||''),'attachments':_0x459017};return await _0x4c7304[_0x1b7fd7(0x189)](_0x290ec6);}}module[a62_0x253ff3(0x18c)]=Mailer;