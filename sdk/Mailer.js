const a62_0x3e3051=a62_0x395d;function a62_0x3c98(){const _0x1c4655=['email','addTemplate','payload','30aPsoyU','user','exports','3764214XEujwc','send','10408ArqXba','attachments','auth','sendMail','html','10333QxDGIu','settings','158039UxEEfr','627iGJjjZ','2093555szzrhA','get','8009340dRLwHb','getTemplateData','128YhnREG','addAttachment','2601156RfzzIn'];a62_0x3c98=function(){return _0x1c4655;};return a62_0x3c98();}(function(_0x1717b4,_0x294099){const _0x4d560e=a62_0x395d,_0x1039d8=_0x1717b4();while(!![]){try{const _0x56efde=parseInt(_0x4d560e(0xd7))/0x1*(-parseInt(_0x4d560e(0xcd))/0x2)+-parseInt(_0x4d560e(0xc2))/0x3*(-parseInt(_0x4d560e(0xd2))/0x4)+-parseInt(_0x4d560e(0xc3))/0x5+-parseInt(_0x4d560e(0xc9))/0x6+-parseInt(_0x4d560e(0xc1))/0x7*(-parseInt(_0x4d560e(0xc7))/0x8)+-parseInt(_0x4d560e(0xd0))/0x9+parseInt(_0x4d560e(0xc5))/0xa;if(_0x56efde===_0x294099)break;else _0x1039d8['push'](_0x1039d8['shift']());}catch(_0x56dad0){_0x1039d8['push'](_0x1039d8['shift']());}}}(a62_0x3c98,0x447ba));const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');function a62_0x395d(_0x29fc7d,_0x1a109f){const _0x3c9859=a62_0x3c98();return a62_0x395d=function(_0x395d25,_0x4dda4c){_0x395d25=_0x395d25-0xc0;let _0x28cb53=_0x3c9859[_0x395d25];return _0x28cb53;},a62_0x395d(_0x29fc7d,_0x1a109f);}class Mailer{constructor(_0x591214){const _0x101c9b=a62_0x395d;this[_0x101c9b(0xc0)]=_0x591214,this[_0x101c9b(0xd6)]='',this[_0x101c9b(0xd3)]=[];}async['getTemplateData'](_0x408bdf){const _0x531758=a62_0x395d,_0x30165b=await TemplateApi['getByName'](_0x408bdf);if(_0x30165b){const _0x42eb07=_0x30165b[_0x531758(0xcc)]||{};return _0x42eb07[_0x531758(0xd6)];}return null;}async[a62_0x3e3051(0xcb)](_0x28f58e,_0x5e9a7f){const _0x3d2a98=a62_0x3e3051,_0x4be93d=await this[_0x3d2a98(0xc6)](_0x28f58e),_0x557706=_0x4be93d?Handlebars['compile'](_0x4be93d):null;this[_0x3d2a98(0xd6)]=_0x557706(_0x5e9a7f);}[a62_0x3e3051(0xc8)](_0x3d3bfe){const _0x14f812=a62_0x3e3051;this[_0x14f812(0xd3)]['push'](_0x3d3bfe);}async[a62_0x3e3051(0xd1)](_0x2db8ac){const _0x4f788e=a62_0x3e3051,_0x2dd24a=this[_0x4f788e(0xc0)]||await SettingsApi[_0x4f788e(0xc4)](_0x4f788e(0xca)),_0x31a457=nodemailer['createTransport'](_0x2dd24a),_0x34353b=[...this[_0x4f788e(0xd3)],..._0x2db8ac['attachments']||[]],_0x56a93e={'from':_0x2dd24a[_0x4f788e(0xd4)][_0x4f788e(0xce)],..._0x2db8ac,'html':this[_0x4f788e(0xd6)]+(_0x2db8ac[_0x4f788e(0xd6)]||''),'attachments':_0x34353b};return await _0x31a457[_0x4f788e(0xd5)](_0x56a93e);}}module[a62_0x3e3051(0xcf)]=Mailer;