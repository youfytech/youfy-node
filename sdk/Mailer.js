function a62_0xabb6(_0x4e191a,_0x5d5121){const _0xa75c9a=a62_0xa75c();return a62_0xabb6=function(_0xabb662,_0x450da7){_0xabb662=_0xabb662-0xe8;let _0x5ba15f=_0xa75c9a[_0xabb662];return _0x5ba15f;},a62_0xabb6(_0x4e191a,_0x5d5121);}const a62_0x4a5c03=a62_0xabb6;(function(_0x2cde91,_0x1fbc9d){const _0x2e2324=a62_0xabb6,_0x522574=_0x2cde91();while(!![]){try{const _0x534717=-parseInt(_0x2e2324(0xf9))/0x1+-parseInt(_0x2e2324(0xec))/0x2+parseInt(_0x2e2324(0x101))/0x3*(-parseInt(_0x2e2324(0xfe))/0x4)+parseInt(_0x2e2324(0xf6))/0x5*(parseInt(_0x2e2324(0xea))/0x6)+parseInt(_0x2e2324(0xf3))/0x7*(parseInt(_0x2e2324(0xff))/0x8)+parseInt(_0x2e2324(0xf4))/0x9*(-parseInt(_0x2e2324(0xee))/0xa)+parseInt(_0x2e2324(0xef))/0xb;if(_0x534717===_0x1fbc9d)break;else _0x522574['push'](_0x522574['shift']());}catch(_0x39179a){_0x522574['push'](_0x522574['shift']());}}}(a62_0xa75c,0x954de));function a62_0xa75c(){const _0x5c04ba=['email','push','17598YNGMJD','html','1882686nQUrrA','getTemplateData','10kpFSZk','15128410mjqTIs','exports','createTransport','getByName','6790777YAZqtc','2937213QpIIXL','user','1535JYfDKf','sendMail','auth','178517HHDwEn','attachments','get','payload','settings','37420QAiVLu','8cXtQWC','addTemplate','381sojrrS'];a62_0xa75c=function(){return _0x5c04ba;};return a62_0xa75c();}const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');class Mailer{constructor(_0x274c53){const _0x5576d5=a62_0xabb6;this[_0x5576d5(0xfd)]=_0x274c53,this['html']='',this['attachments']=[];}async['getTemplateData'](_0x4db490){const _0x50ea10=a62_0xabb6,_0x572dd0=await TemplateApi[_0x50ea10(0xf2)](_0x4db490);if(_0x572dd0){const _0x5862ac=_0x572dd0[_0x50ea10(0xfc)]||{};return _0x5862ac[_0x50ea10(0xeb)];}return null;}async[a62_0x4a5c03(0x100)](_0x4d1d56,_0x550b3f){const _0x1835af=a62_0x4a5c03,_0x2906d1=await this[_0x1835af(0xed)](_0x4d1d56),_0x359f0c=_0x2906d1?Handlebars['compile'](_0x2906d1):null;this[_0x1835af(0xeb)]=_0x359f0c(_0x550b3f);}['addAttachment'](_0x249ccc){const _0x51cb4f=a62_0x4a5c03;this[_0x51cb4f(0xfa)][_0x51cb4f(0xe9)](_0x249ccc);}async['send'](_0x49c73d){const _0x2b30d2=a62_0x4a5c03,_0xcc5b47=this[_0x2b30d2(0xfd)]||await SettingsApi[_0x2b30d2(0xfb)](_0x2b30d2(0xe8)),_0xd8d919=nodemailer[_0x2b30d2(0xf1)](_0xcc5b47),_0x4ac941=[...this['attachments'],..._0x49c73d[_0x2b30d2(0xfa)]||[]],_0x19124b={'from':_0xcc5b47[_0x2b30d2(0xf8)][_0x2b30d2(0xf5)],..._0x49c73d,'html':this[_0x2b30d2(0xeb)]+(_0x49c73d[_0x2b30d2(0xeb)]||''),'attachments':_0x4ac941};return await _0xd8d919[_0x2b30d2(0xf7)](_0x19124b);}}module[a62_0x4a5c03(0xf0)]=Mailer;