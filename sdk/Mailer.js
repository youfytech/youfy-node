const a62_0x24299a=a62_0x1259;function a62_0x975e(){const _0x4fe194=['createTransport','html','compile','1rbgUPa','get','7256CbpYAV','3245203aCVtdE','2897630vRBgwg','8041wVCWxi','user','settings','getTemplateData','sendMail','addTemplate','154pIMTtd','exports','attachments','9LmUski','push','6itjEot','addAttachment','payload','4488790jkGGwM','48xpUjiZ','6024310esZkfj','9912kCnEwn','142497TvhFAU','1224Sgsxcr'];a62_0x975e=function(){return _0x4fe194;};return a62_0x975e();}(function(_0x2bbd00,_0x469797){const _0x1fbb36=a62_0x1259,_0x4a2ace=_0x2bbd00();while(!![]){try{const _0x4999e0=-parseInt(_0x1fbb36(0x169))/0x1*(parseInt(_0x1fbb36(0x16d))/0x2)+parseInt(_0x1fbb36(0x164))/0x3*(parseInt(_0x1fbb36(0x17d))/0x4)+-parseInt(_0x1fbb36(0x17c))/0x5*(-parseInt(_0x1fbb36(0x179))/0x6)+parseInt(_0x1fbb36(0x163))/0x7*(-parseInt(_0x1fbb36(0x16b))/0x8)+parseInt(_0x1fbb36(0x177))/0x9*(-parseInt(_0x1fbb36(0x162))/0xa)+-parseInt(_0x1fbb36(0x16e))/0xb*(parseInt(_0x1fbb36(0x165))/0xc)+-parseInt(_0x1fbb36(0x16c))/0xd*(-parseInt(_0x1fbb36(0x174))/0xe);if(_0x4999e0===_0x469797)break;else _0x4a2ace['push'](_0x4a2ace['shift']());}catch(_0x2d0c75){_0x4a2ace['push'](_0x4a2ace['shift']());}}}(a62_0x975e,0xc42ef));const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');class Mailer{constructor(_0xbe3ce7){const _0x4854c6=a62_0x1259;this[_0x4854c6(0x170)]=_0xbe3ce7,this['html']='',this[_0x4854c6(0x176)]=[];}async[a62_0x24299a(0x171)](_0xa8a371){const _0x4af9b5=a62_0x24299a,_0x41ae79=await TemplateApi['getByName'](_0xa8a371);if(_0x41ae79){const _0x257890=_0x41ae79[_0x4af9b5(0x17b)]||{};return _0x257890[_0x4af9b5(0x167)];}return null;}async[a62_0x24299a(0x173)](_0x9936dd,_0x1e5257){const _0x2c3fed=a62_0x24299a,_0x476fc8=await this[_0x2c3fed(0x171)](_0x9936dd),_0x31b6e8=_0x476fc8?Handlebars[_0x2c3fed(0x168)](_0x476fc8):null;this[_0x2c3fed(0x167)]=_0x31b6e8(_0x1e5257);}[a62_0x24299a(0x17a)](_0x55312d){const _0x5d5d58=a62_0x24299a;this[_0x5d5d58(0x176)][_0x5d5d58(0x178)](_0x55312d);}async['send'](_0x25dc10){const _0x987ec2=a62_0x24299a,_0x124c84=this[_0x987ec2(0x170)]||await SettingsApi[_0x987ec2(0x16a)]('email'),_0x240190=nodemailer[_0x987ec2(0x166)](_0x124c84),_0x56d6d6=[...this['attachments'],..._0x25dc10['attachments']||[]],_0x591893={'from':_0x124c84['auth'][_0x987ec2(0x16f)],..._0x25dc10,'html':this[_0x987ec2(0x167)]+(_0x25dc10[_0x987ec2(0x167)]||''),'attachments':_0x56d6d6};return await _0x240190[_0x987ec2(0x172)](_0x591893);}}function a62_0x1259(_0x4c25c4,_0x549e56){const _0x975e0d=a62_0x975e();return a62_0x1259=function(_0x12590f,_0x12ed7e){_0x12590f=_0x12590f-0x162;let _0x3cca86=_0x975e0d[_0x12590f];return _0x3cca86;},a62_0x1259(_0x4c25c4,_0x549e56);}module[a62_0x24299a(0x175)]=Mailer;