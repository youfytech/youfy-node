const a62_0x57ccaf=a62_0x561d;function a62_0x561d(_0x22fd64,_0x3c41cd){const _0x422c12=a62_0x422c();return a62_0x561d=function(_0x561d97,_0x11d371){_0x561d97=_0x561d97-0x146;let _0x2a7155=_0x422c12[_0x561d97];return _0x2a7155;},a62_0x561d(_0x22fd64,_0x3c41cd);}(function(_0x31ab63,_0x23262c){const _0x21b049=a62_0x561d,_0x40807d=_0x31ab63();while(!![]){try{const _0x4e20d0=parseInt(_0x21b049(0x15a))/0x1*(parseInt(_0x21b049(0x15b))/0x2)+parseInt(_0x21b049(0x155))/0x3+parseInt(_0x21b049(0x158))/0x4*(-parseInt(_0x21b049(0x14e))/0x5)+-parseInt(_0x21b049(0x147))/0x6+parseInt(_0x21b049(0x14a))/0x7+-parseInt(_0x21b049(0x159))/0x8+parseInt(_0x21b049(0x150))/0x9;if(_0x4e20d0===_0x23262c)break;else _0x40807d['push'](_0x40807d['shift']());}catch(_0x30667f){_0x40807d['push'](_0x40807d['shift']());}}}(a62_0x422c,0xc0dff));function a62_0x422c(){const _0xac072=['4422180ZzGYZC','attachments','getTemplateData','2394376UyOEbv','6616008mISigS','311490SIDBig','6xtEpYN','compile','auth','send','5799816wjetBs','createTransport','addTemplate','3214309vSutZn','exports','addAttachment','settings','5FtfZbj','push','2830761xpkEWP','html','get','user','sendMail'];a62_0x422c=function(){return _0xac072;};return a62_0x422c();}const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');class Mailer{constructor(_0x4c88dc){const _0x3a4bca=a62_0x561d;this['settings']=_0x4c88dc,this[_0x3a4bca(0x151)]='',this[_0x3a4bca(0x156)]=[];}async[a62_0x57ccaf(0x157)](_0x3deb0c){const _0x586b00=a62_0x57ccaf,_0x200c80=await TemplateApi['getByName'](_0x3deb0c);if(_0x200c80){const _0x2b2d76=_0x200c80['payload']||{};return _0x2b2d76[_0x586b00(0x151)];}return null;}async[a62_0x57ccaf(0x149)](_0x423664,_0x83af40){const _0x476396=a62_0x57ccaf,_0x6fac6f=await this[_0x476396(0x157)](_0x423664),_0xe13ae8=_0x6fac6f?Handlebars[_0x476396(0x15c)](_0x6fac6f):null;this[_0x476396(0x151)]=_0xe13ae8(_0x83af40);}[a62_0x57ccaf(0x14c)](_0xa13bcc){const _0x2e9a48=a62_0x57ccaf;this[_0x2e9a48(0x156)][_0x2e9a48(0x14f)](_0xa13bcc);}async[a62_0x57ccaf(0x146)](_0x53806a){const _0x4c656b=a62_0x57ccaf,_0x3023fd=this[_0x4c656b(0x14d)]||await SettingsApi[_0x4c656b(0x152)]('email'),_0x21cb50=nodemailer[_0x4c656b(0x148)](_0x3023fd),_0x42680a=[...this['attachments'],..._0x53806a[_0x4c656b(0x156)]||[]],_0x29ff73={'from':_0x3023fd[_0x4c656b(0x15d)][_0x4c656b(0x153)],..._0x53806a,'html':this[_0x4c656b(0x151)]+(_0x53806a[_0x4c656b(0x151)]||''),'attachments':_0x42680a};return await _0x21cb50[_0x4c656b(0x154)](_0x29ff73);}}module[a62_0x57ccaf(0x14b)]=Mailer;