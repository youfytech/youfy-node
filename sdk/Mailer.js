const a62_0x276dc7=a62_0x4fc2;function a62_0x4fc2(_0x5f0308,_0x5c2807){const _0x4162ff=a62_0x4162();return a62_0x4fc2=function(_0x4fc25e,_0x502e4b){_0x4fc25e=_0x4fc25e-0x109;let _0xff1aa4=_0x4162ff[_0x4fc25e];return _0xff1aa4;},a62_0x4fc2(_0x5f0308,_0x5c2807);}(function(_0x5aec49,_0x2e94a5){const _0x387177=a62_0x4fc2,_0x4d362a=_0x5aec49();while(!![]){try{const _0xba2eed=-parseInt(_0x387177(0x120))/0x1*(-parseInt(_0x387177(0x10f))/0x2)+parseInt(_0x387177(0x11d))/0x3+-parseInt(_0x387177(0x118))/0x4*(parseInt(_0x387177(0x10c))/0x5)+-parseInt(_0x387177(0x113))/0x6*(parseInt(_0x387177(0x11f))/0x7)+-parseInt(_0x387177(0x123))/0x8+-parseInt(_0x387177(0x117))/0x9+parseInt(_0x387177(0x125))/0xa*(parseInt(_0x387177(0x109))/0xb);if(_0xba2eed===_0x2e94a5)break;else _0x4d362a['push'](_0x4d362a['shift']());}catch(_0x2c9957){_0x4d362a['push'](_0x4d362a['shift']());}}}(a62_0x4162,0xe6d8b));function a62_0x4162(){const _0x5de790=['2898558ddbJcv','get','2450JYRKLn','275301tTgDkN','push','payload','7830760oBHLWL','createTransport','97550RfwGAT','3487EGSXRE','addTemplate','html','1918045nPRejI','getTemplateData','exports','2eBDdOG','getByName','compile','sendMail','11796QNNzne','settings','attachments','email','5134527fNAxRy','12uuWVwT','auth','addAttachment','send','user'];a62_0x4162=function(){return _0x5de790;};return a62_0x4162();}const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');class Mailer{constructor(_0x552088){const _0x33aa0e=a62_0x4fc2;this[_0x33aa0e(0x114)]=_0x552088,this[_0x33aa0e(0x10b)]='',this[_0x33aa0e(0x115)]=[];}async['getTemplateData'](_0x2a5a7c){const _0x1a5a07=a62_0x4fc2,_0x25c8e5=await TemplateApi[_0x1a5a07(0x110)](_0x2a5a7c);if(_0x25c8e5){const _0x22a7f2=_0x25c8e5[_0x1a5a07(0x122)]||{};return _0x22a7f2[_0x1a5a07(0x10b)];}return null;}async[a62_0x276dc7(0x10a)](_0x154a9d,_0x471540){const _0x538ac3=a62_0x276dc7,_0x58e807=await this[_0x538ac3(0x10d)](_0x154a9d),_0x5957e6=_0x58e807?Handlebars[_0x538ac3(0x111)](_0x58e807):null;this['html']=_0x5957e6(_0x471540);}[a62_0x276dc7(0x11a)](_0x3bfcad){const _0x4b04c3=a62_0x276dc7;this[_0x4b04c3(0x115)][_0x4b04c3(0x121)](_0x3bfcad);}async[a62_0x276dc7(0x11b)](_0x59c256){const _0x34a7df=a62_0x276dc7,_0x5b9290=this['settings']||await SettingsApi[_0x34a7df(0x11e)](_0x34a7df(0x116)),_0x332c1d=nodemailer[_0x34a7df(0x124)](_0x5b9290),_0x13a17b=[...this[_0x34a7df(0x115)],..._0x59c256[_0x34a7df(0x115)]||[]],_0x55e9bb={'from':_0x5b9290[_0x34a7df(0x119)][_0x34a7df(0x11c)],..._0x59c256,'html':this[_0x34a7df(0x10b)]+(_0x59c256[_0x34a7df(0x10b)]||''),'attachments':_0x13a17b};return await _0x332c1d[_0x34a7df(0x112)](_0x55e9bb);}}module[a62_0x276dc7(0x10e)]=Mailer;