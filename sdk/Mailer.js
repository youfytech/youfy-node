const a62_0x36736b=a62_0x31e0;(function(_0x4f8a87,_0x332493){const _0x291fd2=a62_0x31e0,_0x3ba733=_0x4f8a87();while(!![]){try{const _0x1e5aa9=parseInt(_0x291fd2(0x169))/0x1+parseInt(_0x291fd2(0x15a))/0x2+parseInt(_0x291fd2(0x15c))/0x3+-parseInt(_0x291fd2(0x161))/0x4+parseInt(_0x291fd2(0x166))/0x5*(parseInt(_0x291fd2(0x15d))/0x6)+parseInt(_0x291fd2(0x15e))/0x7+-parseInt(_0x291fd2(0x16b))/0x8;if(_0x1e5aa9===_0x332493)break;else _0x3ba733['push'](_0x3ba733['shift']());}catch(_0x1cc768){_0x3ba733['push'](_0x3ba733['shift']());}}}(a62_0x2181,0x830bd));const nodemailer=require('nodemailer'),Handlebars=require('handlebars'),SettingsApi=require('../api/Settings'),TemplateApi=require('../api/Template');function a62_0x2181(){const _0x3ddc59=['get','290836ODSWhu','attachments','13262536xVqHTd','getTemplateData','settings','user','addAttachment','compile','1095284wvxESA','html','1470222fubtEg','36PTkkSU','6843508fYrmmm','push','sendMail','965312UHnGYb','getByName','email','payload','addTemplate','108095rklKop','exports'];a62_0x2181=function(){return _0x3ddc59;};return a62_0x2181();}function a62_0x31e0(_0x458809,_0x213926){const _0x2181f0=a62_0x2181();return a62_0x31e0=function(_0x31e0a5,_0x370466){_0x31e0a5=_0x31e0a5-0x159;let _0x533ea8=_0x2181f0[_0x31e0a5];return _0x533ea8;},a62_0x31e0(_0x458809,_0x213926);}class Mailer{constructor(_0x599ad4){const _0x471733=a62_0x31e0;this[_0x471733(0x16d)]=_0x599ad4,this['html']='',this[_0x471733(0x16a)]=[];}async[a62_0x36736b(0x16c)](_0x1a9a8a){const _0x4ac45b=a62_0x36736b,_0x3c5a44=await TemplateApi[_0x4ac45b(0x162)](_0x1a9a8a);if(_0x3c5a44){const _0x3eaca7=_0x3c5a44[_0x4ac45b(0x164)]||{};return _0x3eaca7[_0x4ac45b(0x15b)];}return null;}async[a62_0x36736b(0x165)](_0x547ea6,_0x2001b9){const _0x8c3688=a62_0x36736b,_0x4c4720=await this[_0x8c3688(0x16c)](_0x547ea6),_0x3f5500=_0x4c4720?Handlebars[_0x8c3688(0x159)](_0x4c4720):null;this['html']=_0x3f5500(_0x2001b9);}[a62_0x36736b(0x16f)](_0x1c89f3){const _0x3d029a=a62_0x36736b;this['attachments'][_0x3d029a(0x15f)](_0x1c89f3);}async['send'](_0xa08ad2){const _0xa731b4=a62_0x36736b,_0xf9bb90=this[_0xa731b4(0x16d)]||await SettingsApi[_0xa731b4(0x168)](_0xa731b4(0x163)),_0x5b085e=nodemailer['createTransport'](_0xf9bb90),_0x1c39cf=[...this[_0xa731b4(0x16a)],..._0xa08ad2[_0xa731b4(0x16a)]||[]],_0x3c553d={'from':_0xf9bb90['auth'][_0xa731b4(0x16e)],..._0xa08ad2,'html':this[_0xa731b4(0x15b)]+(_0xa08ad2[_0xa731b4(0x15b)]||''),'attachments':_0x1c39cf};return await _0x5b085e[_0xa731b4(0x160)](_0x3c553d);}}module[a62_0x36736b(0x167)]=Mailer;