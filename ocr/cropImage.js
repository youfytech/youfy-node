function a51_0x2455(_0x49f981,_0x2ace66){const _0x5bb67e=a51_0x5bb6();return a51_0x2455=function(_0x2455e1,_0x5d0fca){_0x2455e1=_0x2455e1-0x19e;let _0x1357fb=_0x5bb67e[_0x2455e1];return _0x1357fb;},a51_0x2455(_0x49f981,_0x2ace66);}const a51_0x41652b=a51_0x2455;(function(_0x3c5dc8,_0x4027b9){const _0x3447b2=a51_0x2455,_0x5933a4=_0x3c5dc8();while(!![]){try{const _0x34e61b=parseInt(_0x3447b2(0x1af))/0x1+parseInt(_0x3447b2(0x19f))/0x2+parseInt(_0x3447b2(0x1b7))/0x3*(-parseInt(_0x3447b2(0x1b9))/0x4)+-parseInt(_0x3447b2(0x1ae))/0x5*(parseInt(_0x3447b2(0x1ad))/0x6)+parseInt(_0x3447b2(0x1a8))/0x7*(-parseInt(_0x3447b2(0x1b5))/0x8)+-parseInt(_0x3447b2(0x1aa))/0x9*(-parseInt(_0x3447b2(0x1a0))/0xa)+parseInt(_0x3447b2(0x1ab))/0xb;if(_0x34e61b===_0x4027b9)break;else _0x5933a4['push'](_0x5933a4['shift']());}catch(_0x270c9c){_0x5933a4['push'](_0x5933a4['shift']());}}}(a51_0x5bb6,0x749a7));const os=require('os'),{resolve}=require('path'),jimp=require('jimp'),{promisify}=require('util'),sizeOf=promisify(require('image-size')),apply_factor=(_0x4a6254,_0x5c8722)=>Math[a51_0x41652b(0x1ac)](parseInt(_0x4a6254)*_0x5c8722);module[a51_0x41652b(0x1b6)]=async function cropImage(_0x5ac6cf,_0xa3725d,_0x776d6e={}){const _0x3b966c=a51_0x41652b,_0xd7add7={'output_dir':os[_0x3b966c(0x1a4)](),'file_width':0x9af,..._0x776d6e},_0x315f5b=resolve(_0xd7add7[_0x3b966c(0x1a6)],_0x5ac6cf['id']+_0x3b966c(0x1b3)),_0x1dcc74=await sizeOf(_0xa3725d)||{'width':0x0,'height':0x0},_0xbc5b74=_0x1dcc74[_0x3b966c(0x1b4)]/_0xd7add7['file_width'],_0x4e6f89=_0x5ac6cf[_0x3b966c(0x1a2)]||{},_0x1cbec8=_0x4e6f89[_0x3b966c(0x1b8)]||_0x5ac6cf[_0x3b966c(0x1a9)]||_0x3b966c(0x1b2),_0x30b05b=_0x1cbec8[_0x3b966c(0x1a3)](','),_0x211b5b=apply_factor(_0x30b05b[0x0],_0xbc5b74),_0x5d9815=apply_factor(_0x30b05b[0x1],_0xbc5b74),_0x5590ea=apply_factor(_0x30b05b[0x2],_0xbc5b74),_0x152351=apply_factor(_0x30b05b[0x3],_0xbc5b74),_0x1c2d72=Math[_0x3b966c(0x1b1)](_0x5590ea-_0x211b5b),_0x14b22a=Math[_0x3b966c(0x1b1)](_0x152351-_0x5d9815),_0x5f433d=0x1;try{const _0x249790=await jimp[_0x3b966c(0x1b0)](_0xa3725d);return await _0x249790['crop'](_0x211b5b,_0x5d9815,_0x1c2d72,_0x14b22a),await _0x249790['resize'](Math['round'](_0x1c2d72*_0x5f433d),Math[_0x3b966c(0x1ac)](_0x14b22a*_0x5f433d)),await _0x249790['write'](_0x315f5b),await timer[_0x3b966c(0x1a7)](0x12c),_0x315f5b;}catch(_0x7e7071){console[_0x3b966c(0x19e)](_0x3b966c(0x1a5),_0x7e7071[_0x3b966c(0x1a1)]);}return null;};function a51_0x5bb6(){const _0xe37d88=['0,0,0,0','.jpg','width','1989176HipdSw','exports','15oSaXzo','coords','709892RdpNvq','warn','1152050Qsaedv','330uSxADn','message','payload','split','tmpdir','[CROP\x20ERROR]','output_dir','sleep','7fenUNp','coordinates','126279mxMLTQ','7653096jNmXir','round','11166rfKjoT','415zMHAPN','33298njcwxh','read','abs'];a51_0x5bb6=function(){return _0xe37d88;};return a51_0x5bb6();}