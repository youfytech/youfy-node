const a51_0xad7f75=a51_0x260a;(function(_0x4688a4,_0xcd3864){const _0x5e29eb=a51_0x260a,_0x65a9eb=_0x4688a4();while(!![]){try{const _0x895621=parseInt(_0x5e29eb(0x1aa))/0x1*(parseInt(_0x5e29eb(0x1b4))/0x2)+parseInt(_0x5e29eb(0x1a8))/0x3*(parseInt(_0x5e29eb(0x1a9))/0x4)+parseInt(_0x5e29eb(0x1b5))/0x5+parseInt(_0x5e29eb(0x1af))/0x6+-parseInt(_0x5e29eb(0x1bf))/0x7+parseInt(_0x5e29eb(0x1b9))/0x8*(parseInt(_0x5e29eb(0x1b3))/0x9)+-parseInt(_0x5e29eb(0x1b7))/0xa;if(_0x895621===_0xcd3864)break;else _0x65a9eb['push'](_0x65a9eb['shift']());}catch(_0x586670){_0x65a9eb['push'](_0x65a9eb['shift']());}}}(a51_0x5c98,0x4e8c0));function a51_0x260a(_0x6905b0,_0x4740c6){const _0x5c982a=a51_0x5c98();return a51_0x260a=function(_0x260a34,_0x4e4224){_0x260a34=_0x260a34-0x1a7;let _0x4cb3eb=_0x5c982a[_0x260a34];return _0x4cb3eb;},a51_0x260a(_0x6905b0,_0x4740c6);}const os=require('os'),{resolve}=require('path'),jimp=require('jimp'),{promisify}=require('util'),sizeOf=promisify(require('image-size')),apply_factor=(_0x602398,_0x2d4380)=>Math[a51_0xad7f75(0x1b1)](parseInt(_0x602398)*_0x2d4380);module['exports']=async function cropImage(_0x171e16,_0x2d3108,_0x55d551={}){const _0x16bd0e=a51_0xad7f75,_0x506497={'output_dir':os[_0x16bd0e(0x1be)](),'file_width':0x9af,..._0x55d551},_0x20e521=resolve(_0x506497['output_dir'],_0x171e16['id']+'.jpg'),_0xee3cad=await sizeOf(_0x2d3108)||{'width':0x0,'height':0x0},_0x1c523a=_0xee3cad['width']/_0x506497[_0x16bd0e(0x1bc)],_0x329015=_0x171e16['payload']||{},_0x240562=_0x329015[_0x16bd0e(0x1b0)]||_0x171e16[_0x16bd0e(0x1b2)]||_0x16bd0e(0x1ae),_0x255b61=_0x240562[_0x16bd0e(0x1a7)](','),_0x37b1b8=apply_factor(_0x255b61[0x0],_0x1c523a),_0x1be2e1=apply_factor(_0x255b61[0x1],_0x1c523a),_0x3a0030=apply_factor(_0x255b61[0x2],_0x1c523a),_0x55e783=apply_factor(_0x255b61[0x3],_0x1c523a),_0x3b93bf=Math[_0x16bd0e(0x1ac)](_0x3a0030-_0x37b1b8),_0x4614b2=Math['abs'](_0x55e783-_0x1be2e1),_0x112d8f=0x1;try{const _0x46668f=await jimp[_0x16bd0e(0x1ab)](_0x2d3108);return await _0x46668f[_0x16bd0e(0x1b8)](_0x37b1b8,_0x1be2e1,_0x3b93bf,_0x4614b2),await _0x46668f[_0x16bd0e(0x1bd)](Math[_0x16bd0e(0x1b1)](_0x3b93bf*_0x112d8f),Math[_0x16bd0e(0x1b1)](_0x4614b2*_0x112d8f)),await _0x46668f[_0x16bd0e(0x1bb)](_0x20e521),await timer[_0x16bd0e(0x1b6)](0x12c),_0x20e521;}catch(_0x46dd17){console[_0x16bd0e(0x1ad)]('[CROP\x20ERROR]',_0x46dd17[_0x16bd0e(0x1ba)]);}return null;};function a51_0x5c98(){const _0x15ce07=['1950431tLiTPU','split','273rBhaSc','23492gxsasp','71LNBzzU','read','abs','warn','0,0,0,0','2435070lFeBff','coords','round','coordinates','5135733nmfYCg','7114IkcEnc','505880UdNgEB','sleep','12642870NLPgNq','crop','8nYfSow','message','write','file_width','resize','tmpdir'];a51_0x5c98=function(){return _0x15ce07;};return a51_0x5c98();}