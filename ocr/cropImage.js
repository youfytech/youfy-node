const a51_0x57486c=a51_0x2920;(function(_0xecaa56,_0x34ad3f){const _0x8a4d32=a51_0x2920,_0x18b04d=_0xecaa56();while(!![]){try{const _0x1dac1a=-parseInt(_0x8a4d32(0x98))/0x1*(-parseInt(_0x8a4d32(0x99))/0x2)+parseInt(_0x8a4d32(0xa2))/0x3*(-parseInt(_0x8a4d32(0x9d))/0x4)+-parseInt(_0x8a4d32(0x95))/0x5+-parseInt(_0x8a4d32(0x9e))/0x6+parseInt(_0x8a4d32(0x9f))/0x7*(-parseInt(_0x8a4d32(0x9b))/0x8)+parseInt(_0x8a4d32(0x92))/0x9*(parseInt(_0x8a4d32(0xa4))/0xa)+parseInt(_0x8a4d32(0x8e))/0xb;if(_0x1dac1a===_0x34ad3f)break;else _0x18b04d['push'](_0x18b04d['shift']());}catch(_0xf00840){_0x18b04d['push'](_0x18b04d['shift']());}}}(a51_0x5094,0x9a10a));function a51_0x5094(){const _0xfbb45a=['.jpg','1703580LZeXzg','3001338tLdWen','35OMhuNZ','[CROP\x20ERROR]','tmpdir','6aLRNsV','payload','3405770TEuXkr','round','sleep','exports','coordinates','crop','22282458QmwFIa','coords','split','0,0,0,0','9bXdTzN','write','width','78240kjJKme','abs','resize','1kyvFJK','842742IWGTBu','warn','1262264twuCkG'];a51_0x5094=function(){return _0xfbb45a;};return a51_0x5094();}const os=require('os'),{resolve}=require('path'),jimp=require('jimp'),{promisify}=require('util'),sizeOf=promisify(require('image-size')),apply_factor=(_0x147009,_0x28c7db)=>Math[a51_0x57486c(0xa5)](parseInt(_0x147009)*_0x28c7db);function a51_0x2920(_0x34bf01,_0x496e40){const _0x5094e8=a51_0x5094();return a51_0x2920=function(_0x2920db,_0x2fbe1e){_0x2920db=_0x2920db-0x8d;let _0x14b0d0=_0x5094e8[_0x2920db];return _0x14b0d0;},a51_0x2920(_0x34bf01,_0x496e40);}module[a51_0x57486c(0xa7)]=async function cropImage(_0x2b08ef,_0x1abbe8,_0x2b2af7={}){const _0x19ab7b=a51_0x57486c,_0x3536aa={'output_dir':os[_0x19ab7b(0xa1)](),'file_width':0x9af,..._0x2b2af7},_0x5641df=resolve(_0x3536aa['output_dir'],_0x2b08ef['id']+_0x19ab7b(0x9c)),_0xf3a247=await sizeOf(_0x1abbe8)||{'width':0x0,'height':0x0},_0x390d42=_0xf3a247[_0x19ab7b(0x94)]/_0x3536aa['file_width'],_0x3f230b=_0x2b08ef[_0x19ab7b(0xa3)]||{},_0x5b4969=_0x3f230b[_0x19ab7b(0x8f)]||_0x2b08ef[_0x19ab7b(0xa8)]||_0x19ab7b(0x91),_0x545801=_0x5b4969[_0x19ab7b(0x90)](','),_0x1ae71a=apply_factor(_0x545801[0x0],_0x390d42),_0x29c81f=apply_factor(_0x545801[0x1],_0x390d42),_0x552509=apply_factor(_0x545801[0x2],_0x390d42),_0x3d7fe2=apply_factor(_0x545801[0x3],_0x390d42),_0x5cd4b5=Math[_0x19ab7b(0x96)](_0x552509-_0x1ae71a),_0x3f8470=Math[_0x19ab7b(0x96)](_0x3d7fe2-_0x29c81f),_0xb2b729=0x1;try{const _0x385b2c=await jimp['read'](_0x1abbe8);return await _0x385b2c[_0x19ab7b(0x8d)](_0x1ae71a,_0x29c81f,_0x5cd4b5,_0x3f8470),await _0x385b2c[_0x19ab7b(0x97)](Math[_0x19ab7b(0xa5)](_0x5cd4b5*_0xb2b729),Math['round'](_0x3f8470*_0xb2b729)),await _0x385b2c[_0x19ab7b(0x93)](_0x5641df),await timer[_0x19ab7b(0xa6)](0x12c),_0x5641df;}catch(_0x583bae){console[_0x19ab7b(0x9a)](_0x19ab7b(0xa0),_0x583bae['message']);}return null;};