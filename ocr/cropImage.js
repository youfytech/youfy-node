const a51_0xf03e26=a51_0x47cb;function a51_0x5eb8(){const _0x386cb4=['read','8163575RTmHME','3951yEiRmM','132QubHEU','23872pMKTkm','1175diLHMo','round','572920qSzLge','1wppEET','sleep','resize','6632JceRhJ','tmpdir','file_width','split','width','1095852FezhWz','1638110HHOPHd','[CROP\x20ERROR]','write','0,0,0,0','payload','crop','.jpg','4198260KayScL','coords','abs'];a51_0x5eb8=function(){return _0x386cb4;};return a51_0x5eb8();}(function(_0x301a98,_0xb908f7){const _0x56613b=a51_0x47cb,_0xf746ba=_0x301a98();while(!![]){try{const _0x1cada4=-parseInt(_0x56613b(0x1b3))/0x1*(parseInt(_0x56613b(0x1b2))/0x2)+-parseInt(_0x56613b(0x1a8))/0x3+-parseInt(_0x56613b(0x1b6))/0x4*(-parseInt(_0x56613b(0x1b0))/0x5)+parseInt(_0x56613b(0x1bb))/0x6+parseInt(_0x56613b(0x1ac))/0x7+parseInt(_0x56613b(0x1af))/0x8*(-parseInt(_0x56613b(0x1ad))/0x9)+-parseInt(_0x56613b(0x1bc))/0xa*(-parseInt(_0x56613b(0x1ae))/0xb);if(_0x1cada4===_0xb908f7)break;else _0xf746ba['push'](_0xf746ba['shift']());}catch(_0x1fee0b){_0xf746ba['push'](_0xf746ba['shift']());}}}(a51_0x5eb8,0xacf15));const os=require('os'),{resolve}=require('path'),jimp=require('jimp'),{promisify}=require('util'),sizeOf=promisify(require('image-size')),apply_factor=(_0x401986,_0x3f119b)=>Math[a51_0xf03e26(0x1b1)](parseInt(_0x401986)*_0x3f119b);function a51_0x47cb(_0x24c79e,_0x2ab9ce){const _0x5eb87e=a51_0x5eb8();return a51_0x47cb=function(_0x47cbf6,_0x43aae9){_0x47cbf6=_0x47cbf6-0x1a2;let _0xb727af=_0x5eb87e[_0x47cbf6];return _0xb727af;},a51_0x47cb(_0x24c79e,_0x2ab9ce);}module['exports']=async function cropImage(_0x4527cc,_0x2709a3,_0x1a5890={}){const _0x3562f3=a51_0xf03e26,_0x5c6762={'output_dir':os[_0x3562f3(0x1b7)](),'file_width':0x9af,..._0x1a5890},_0x2a151b=resolve(_0x5c6762['output_dir'],_0x4527cc['id']+_0x3562f3(0x1a7)),_0x9b52a8=await sizeOf(_0x2709a3)||{'width':0x0,'height':0x0},_0x3bea0e=_0x9b52a8[_0x3562f3(0x1ba)]/_0x5c6762[_0x3562f3(0x1b8)],_0x76c926=_0x4527cc[_0x3562f3(0x1a5)]||{},_0x1f3580=_0x76c926[_0x3562f3(0x1a9)]||_0x4527cc['coordinates']||_0x3562f3(0x1a4),_0xb809a9=_0x1f3580[_0x3562f3(0x1b9)](','),_0x5a4051=apply_factor(_0xb809a9[0x0],_0x3bea0e),_0x2d96f7=apply_factor(_0xb809a9[0x1],_0x3bea0e),_0x2572e8=apply_factor(_0xb809a9[0x2],_0x3bea0e),_0x5891bf=apply_factor(_0xb809a9[0x3],_0x3bea0e),_0x3cd258=Math[_0x3562f3(0x1aa)](_0x2572e8-_0x5a4051),_0x534bd7=Math[_0x3562f3(0x1aa)](_0x5891bf-_0x2d96f7),_0x24ca83=0x1;try{const _0x5ab897=await jimp[_0x3562f3(0x1ab)](_0x2709a3);return await _0x5ab897[_0x3562f3(0x1a6)](_0x5a4051,_0x2d96f7,_0x3cd258,_0x534bd7),await _0x5ab897[_0x3562f3(0x1b5)](Math[_0x3562f3(0x1b1)](_0x3cd258*_0x24ca83),Math[_0x3562f3(0x1b1)](_0x534bd7*_0x24ca83)),await _0x5ab897[_0x3562f3(0x1a3)](_0x2a151b),await timer[_0x3562f3(0x1b4)](0x12c),_0x2a151b;}catch(_0x1ba661){console['warn'](_0x3562f3(0x1a2),_0x1ba661['message']);}return null;};