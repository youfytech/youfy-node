function a51_0x1473(){const _0x240725=['0,0,0,0','[CROP\x20ERROR]','coordinates','crop','payload','1946130gIemol','split','width','tmpdir','message','output_dir','154yLAghQ','2565837ykfbGA','376304DnQfEO','exports','3376385viLQgF','round','resize','file_width','read','332682TOldNr','abs','6uDWMFG','163472GcQPUm','warn','1788700QwuTBM','coords','sleep','write'];a51_0x1473=function(){return _0x240725;};return a51_0x1473();}const a51_0x251e79=a51_0xd8f5;(function(_0x1c36e9,_0x28eba0){const _0x520c3c=a51_0xd8f5,_0x48d588=_0x1c36e9();while(!![]){try{const _0x476962=parseInt(_0x520c3c(0x16f))/0x1+-parseInt(_0x520c3c(0x176))/0x2+parseInt(_0x520c3c(0x167))/0x3+-parseInt(_0x520c3c(0x17b))/0x4+parseInt(_0x520c3c(0x171))/0x5*(parseInt(_0x520c3c(0x178))/0x6)+parseInt(_0x520c3c(0x16d))/0x7*(-parseInt(_0x520c3c(0x179))/0x8)+-parseInt(_0x520c3c(0x16e))/0x9;if(_0x476962===_0x28eba0)break;else _0x48d588['push'](_0x48d588['shift']());}catch(_0x5d5481){_0x48d588['push'](_0x48d588['shift']());}}}(a51_0x1473,0x55f86));function a51_0xd8f5(_0x13d118,_0x5f41a2){const _0x147329=a51_0x1473();return a51_0xd8f5=function(_0xd8f536,_0x4d47f6){_0xd8f536=_0xd8f536-0x163;let _0x2d5c32=_0x147329[_0xd8f536];return _0x2d5c32;},a51_0xd8f5(_0x13d118,_0x5f41a2);}const os=require('os'),{resolve}=require('path'),jimp=require('jimp'),{promisify}=require('util'),sizeOf=promisify(require('image-size')),apply_factor=(_0x4471ca,_0x284235)=>Math[a51_0x251e79(0x172)](parseInt(_0x4471ca)*_0x284235);module[a51_0x251e79(0x170)]=async function cropImage(_0x22f41a,_0x4993e7,_0x20524e={}){const _0x244c34=a51_0x251e79,_0x400fdb={'output_dir':os[_0x244c34(0x16a)](),'file_width':0x9af,..._0x20524e},_0x194dbe=resolve(_0x400fdb[_0x244c34(0x16c)],_0x22f41a['id']+'.jpg'),_0x265c41=await sizeOf(_0x4993e7)||{'width':0x0,'height':0x0},_0x425e93=_0x265c41[_0x244c34(0x169)]/_0x400fdb[_0x244c34(0x174)],_0x3e0636=_0x22f41a[_0x244c34(0x166)]||{},_0x3b3b63=_0x3e0636[_0x244c34(0x17c)]||_0x22f41a[_0x244c34(0x164)]||_0x244c34(0x17f),_0x35ada2=_0x3b3b63[_0x244c34(0x168)](','),_0x3bb08c=apply_factor(_0x35ada2[0x0],_0x425e93),_0x36e0f4=apply_factor(_0x35ada2[0x1],_0x425e93),_0x36eb4f=apply_factor(_0x35ada2[0x2],_0x425e93),_0x297a22=apply_factor(_0x35ada2[0x3],_0x425e93),_0x22f63c=Math[_0x244c34(0x177)](_0x36eb4f-_0x3bb08c),_0x4d9876=Math['abs'](_0x297a22-_0x36e0f4),_0x1efec9=0x1;try{const _0x2d1eee=await jimp[_0x244c34(0x175)](_0x4993e7);return await _0x2d1eee[_0x244c34(0x165)](_0x3bb08c,_0x36e0f4,_0x22f63c,_0x4d9876),await _0x2d1eee[_0x244c34(0x173)](Math[_0x244c34(0x172)](_0x22f63c*_0x1efec9),Math[_0x244c34(0x172)](_0x4d9876*_0x1efec9)),await _0x2d1eee[_0x244c34(0x17e)](_0x194dbe),await timer[_0x244c34(0x17d)](0x12c),_0x194dbe;}catch(_0x25a3cd){console[_0x244c34(0x17a)](_0x244c34(0x163),_0x25a3cd[_0x244c34(0x16b)]);}return null;};