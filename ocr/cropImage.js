const a51_0x200700=a51_0x408b;function a51_0x43dd(){const _0x14ba22=['7178iYvTJM','split','571104USeasV','56kWTUXi','coords','[CROP\x20ERROR]','sleep','file_width','write','149yjfmrZ','2111481wBwxsc','tmpdir','round','185171eoZABX','exports','762952eHwCep','771287PFQwPQ','1451910TDCtKW','warn','.jpg','width','10IkBMqo','payload','output_dir','read','message','30nwPnoC'];a51_0x43dd=function(){return _0x14ba22;};return a51_0x43dd();}function a51_0x408b(_0x27475a,_0x239036){const _0x43dd5d=a51_0x43dd();return a51_0x408b=function(_0x408b79,_0x3ad728){_0x408b79=_0x408b79-0x85;let _0x5afd16=_0x43dd5d[_0x408b79];return _0x5afd16;},a51_0x408b(_0x27475a,_0x239036);}(function(_0x24238f,_0x46faae){const _0x5ac900=a51_0x408b,_0x2dc902=_0x24238f();while(!![]){try{const _0x5b9aec=-parseInt(_0x5ac900(0x93))/0x1*(parseInt(_0x5ac900(0x8a))/0x2)+parseInt(_0x5ac900(0x9b))/0x3+-parseInt(_0x5ac900(0x99))/0x4*(parseInt(_0x5ac900(0x9f))/0x5)+parseInt(_0x5ac900(0x8c))/0x6+parseInt(_0x5ac900(0x97))/0x7*(parseInt(_0x5ac900(0x8d))/0x8)+parseInt(_0x5ac900(0x94))/0x9+-parseInt(_0x5ac900(0x89))/0xa*(-parseInt(_0x5ac900(0x9a))/0xb);if(_0x5b9aec===_0x46faae)break;else _0x2dc902['push'](_0x2dc902['shift']());}catch(_0x232a74){_0x2dc902['push'](_0x2dc902['shift']());}}}(a51_0x43dd,0x478b8));const os=require('os'),{resolve}=require('path'),jimp=require('jimp'),{promisify}=require('util'),sizeOf=promisify(require('image-size')),apply_factor=(_0x1f3dea,_0x1c883a)=>Math[a51_0x200700(0x96)](parseInt(_0x1f3dea)*_0x1c883a);module[a51_0x200700(0x98)]=async function cropImage(_0x3aa8d1,_0x33e50b,_0x8c2318={}){const _0xa42cb7=a51_0x200700,_0x149c58={'output_dir':os[_0xa42cb7(0x95)](),'file_width':0x9af,..._0x8c2318},_0x25730e=resolve(_0x149c58[_0xa42cb7(0x86)],_0x3aa8d1['id']+_0xa42cb7(0x9d)),_0x4aeee0=await sizeOf(_0x33e50b)||{'width':0x0,'height':0x0},_0x5533f0=_0x4aeee0[_0xa42cb7(0x9e)]/_0x149c58[_0xa42cb7(0x91)],_0x81d4d4=_0x3aa8d1[_0xa42cb7(0x85)]||{},_0xb86085=_0x81d4d4[_0xa42cb7(0x8e)]||_0x3aa8d1['coordinates']||'0,0,0,0',_0x5e5dc8=_0xb86085[_0xa42cb7(0x8b)](','),_0x331728=apply_factor(_0x5e5dc8[0x0],_0x5533f0),_0x3e845c=apply_factor(_0x5e5dc8[0x1],_0x5533f0),_0x254986=apply_factor(_0x5e5dc8[0x2],_0x5533f0),_0x130718=apply_factor(_0x5e5dc8[0x3],_0x5533f0),_0x18fcae=Math['abs'](_0x254986-_0x331728),_0x4b7b1c=Math['abs'](_0x130718-_0x3e845c),_0x43f985=0x1;try{const _0x1a5002=await jimp[_0xa42cb7(0x87)](_0x33e50b);return await _0x1a5002['crop'](_0x331728,_0x3e845c,_0x18fcae,_0x4b7b1c),await _0x1a5002['resize'](Math[_0xa42cb7(0x96)](_0x18fcae*_0x43f985),Math['round'](_0x4b7b1c*_0x43f985)),await _0x1a5002[_0xa42cb7(0x92)](_0x25730e),await timer[_0xa42cb7(0x90)](0x12c),_0x25730e;}catch(_0x22dc00){console[_0xa42cb7(0x9c)](_0xa42cb7(0x8f),_0x22dc00[_0xa42cb7(0x88)]);}return null;};